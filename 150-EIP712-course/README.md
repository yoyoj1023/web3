# EIP712 完整學習課程

> 從零開始掌握 EIP712 結構化數據簽名標準

## 📚 課程簡介

這是一套完整的 EIP712 學習課程，專為想要深入理解以太坊結構化數據簽名的開發者設計。課程涵蓋從基礎概念、心智模型建立、技術細節到實戰應用的完整學習路徑。

### 為什麼要學習 EIP712？

- ✅ **提升用戶體驗**：實現 gasless 交易和授權
- ✅ **增強安全性**：結構化簽名防止盲簽風險
- ✅ **掌握標準**：理解 Permit、Meta-transaction 等主流協議的核心技術
- ✅ **實務應用**：學習 Uniswap、OpenSea 等頂級項目使用的簽名技術

## 🎯 適合對象

- 熟悉 TypeScript 和 Solidity 的區塊鏈開發者
- 了解數位簽名基礎，想深入學習 EIP712 的工程師
- 需要實作鏈下簽名功能的 DApp 開發者

## 📖 課程架構

### [第一章：EIP712 基礎 - 概念、動機與心智模型](./01-fundamentals/)
建立正確的 EIP712 心智圖像，理解為什麼需要 EIP712 以及它如何運作。
- 問題與動機
- 核心心智模型（類比、視覺化）
- 與 EIP191 的關係
- 實際對比範例

### [第二章：編碼流程深度解析](./02-encoding-flow/)
深入理解 EIP712 的四個核心編碼步驟。
- Domain Separator 構建
- Type Hash 計算
- Struct Hash 生成
- Digest 最終計算
- 逐步演示和互動式工具

### [第三章：簽名組件解密](./03-signature-components/)
完全理解 ECDSA 簽名的 v, r, s 組件。
- v: 恢復標識符的意義
- r: 簽名的 x 坐標
- s: 簽名證明
- 地址恢復原理
- 簽名可塑性問題

### [第四章：Hello World 範例](./04-hello-world/)
最簡單的 EIP712 實作，手把手教學。
- 完整的簽名和驗證流程
- ethers.js 和 viem 雙版本實作
- 手動編碼演示
- 鏈上驗證

### [第五章：實戰應用範例](./05-practical-examples/)
學習真實世界的 EIP712 應用場景。
- ERC20 Permit（EIP-2612）
- Meta-transaction（ERC-2771）
- 複雜類型和嵌套結構

### [第六章：安全性與最佳實踐](./06-security-best-practices/)
掌握 EIP712 開發的安全要點。
- 重放攻擊防護
- 前端釣魚防護
- 常見錯誤和陷阱
- 調試技巧

### [第七章：互動式練習](./07-exercises/)
通過三個難度遞增的練習鞏固所學。
- 基礎：投票簽名系統
- 中級：NFT 鏈下授權白名單
- 高級：Gasless DAO 提案系統

## 🚀 快速開始

### 環境要求

- Node.js >= 18
- npm 或 yarn
- 基礎的 TypeScript 和 Solidity 知識

### 安裝

```bash
# 克隆或進入專案目錄
cd 150-EIP712

# 安裝依賴
npm install

# 編譯合約
npm run compile
```

### 環境配置

創建 `.env` 檔案（可參考 `.env.example`）：

```bash
PRIVATE_KEY=your_test_private_key_here
RPC_URL=http://127.0.0.1:8545
```

⚠️ **注意**：僅使用測試私鑰，切勿使用真實資金的私鑰！

### 啟動本地網路

```bash
# 開啟本地 Hardhat 節點
npm run node
```

## 📚 學習路徑

### 🏃 快速入門路徑（3-4 小時）
適合想快速上手的開發者

```
第 1 章（重點閱讀心智模型）→ 第 4 章 → 第 7 章練習 1
```

### 🚶 初學者完整路徑（6-8 小時）
建議第一次學習的路徑

```
第 1 章 → 第 2 章 → 第 3 章 → 第 4 章 → 第 6 章（安全性概念）→ 第 7 章（練習 1-2）
```

### 🏃‍♂️ 進階完整路徑（12-15 小時）
深度掌握 EIP712

```
按章節順序學習所有內容，完成所有練習
```

## 💡 學習建議

1. **先建立心智模型**：第一章的心智模型非常重要，建議仔細閱讀並理解類比
2. **動手實作**：每個範例都可以運行，建議親自執行並觀察輸出
3. **對比學習**：同時提供 ethers.js 和 viem 版本，可以對比學習
4. **完成練習**：練習題設計循序漸進，能有效鞏固知識
5. **參考實際項目**：學習完成後可以研究 Uniswap Permit2、OpenSea Seaport 等真實專案

## 🛠️ 技術特色

- ✅ 同時提供 **ethers.js** 和 **viem** 兩種實作範例
- ✅ 所有 Solidity 合約都包含詳細中文注釋
- ✅ 每個 TypeScript 範例都可獨立運行
- ✅ 使用 Mermaid 圖表視覺化複雜概念
- ✅ 漸進式教學設計
- ✅ 真實場景案例
- ✅ 完整的測試和調試指南

## 📚 延伸資源

詳見 [RESOURCES.md](./RESOURCES.md)

## 🤝 貢獻

歡迎提出問題、建議或改進！

## 📄 授權

MIT License

---

**開始學習**: [第一章：EIP712 基礎 - 概念、動機與心智模型](./01-fundamentals/README.md)

