# ğŸŒ IPFS å»ä¸­å¿ƒåŒ–ç•™è¨€æ¿ | IPFS Decentralized Message Board

<div align="center">

![License](https://img.shields.io/badge/License-MIT-blue.svg)
![Solidity](https://img.shields.io/badge/Solidity-^0.8.19-red.svg)
![Next.js](https://img.shields.io/badge/Next.js-14-black.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.8-blue.svg)

**ä¸€å€‹çµåˆå€å¡Šéˆèˆ‡ IPFS æŠ€è¡“çš„å»ä¸­å¿ƒåŒ–ç•™è¨€æ¿æ‡‰ç”¨**

[ğŸš€ å¿«é€Ÿé–‹å§‹](#-å¿«é€Ÿé–‹å§‹) â€¢ [ğŸ“– åŠŸèƒ½ä»‹ç´¹](#-åŠŸèƒ½ä»‹ç´¹) â€¢ [ğŸ—ï¸ æŠ€è¡“æ¶æ§‹](#ï¸-æŠ€è¡“æ¶æ§‹) â€¢ [ğŸ“± ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—) â€¢ [ğŸ”§ é–‹ç™¼æŒ‡å—](#-é–‹ç™¼æŒ‡å—)

</div>

---

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

æœ¬å°ˆæ¡ˆæ˜¯ **141-IPFS-course-v2** èª²ç¨‹çš„å®Œæ•´å¯¦ä½œï¼Œå±•ç¤ºå¦‚ä½•å»ºæ§‹ä¸€å€‹çœŸæ­£çš„å»ä¸­å¿ƒåŒ–æ‡‰ç”¨ï¼ˆDAppï¼‰ã€‚é€éæ•´åˆä»¥å¤ªåŠæ™ºèƒ½åˆç´„èˆ‡ IPFS åˆ†æ•£å¼å„²å­˜ç³»çµ±ï¼Œå¯¦ç¾äº†ä¸€å€‹ç„¡éœ€ä¸­å¤®ä¼ºæœå™¨çš„ç•™è¨€æ¿å¹³å°ã€‚

### ğŸ¯ å°ˆæ¡ˆç›®æ¨™

- **å»ä¸­å¿ƒåŒ–å„²å­˜**ï¼šä½¿ç”¨ IPFS å„²å­˜ç•™è¨€å…§å®¹ï¼Œç¢ºä¿è³‡æ–™æ°¸ä¹…æ€§å’ŒæŠ—å¯©æŸ¥æ€§
- **å€å¡Šéˆé©—è­‰**ï¼šé€éæ™ºèƒ½åˆç´„ç¢ºä¿ç•™è¨€çš„çœŸå¯¦æ€§å’Œä¸å¯ç¯¡æ”¹æ€§
- **ä½¿ç”¨è€…å‹å–„**ï¼šæä¾›ç›´è§€çš„ Web3 ä½¿ç”¨è€…ä»‹é¢
- **é–‹æºé€æ˜**ï¼šå®Œå…¨é–‹æºï¼Œå¯é©—è­‰çš„æ™ºèƒ½åˆç´„å’Œå‰ç«¯ä»£ç¢¼

### âœ¨ ä¸»è¦ç‰¹è‰²

- ğŸ”’ **å®Œå…¨å»ä¸­å¿ƒåŒ–**ï¼šç„¡éœ€ä¸­å¤®ä¼ºæœå™¨ï¼Œè³‡æ–™å„²å­˜åœ¨ IPFS å’Œå€å¡Šéˆä¸Š
- ğŸ›¡ï¸ **æŠ—å¯©æŸ¥æ€§**ï¼šå…§å®¹ç„¡æ³•è¢«å–®ä¸€å¯¦é«”åˆªé™¤æˆ–ä¿®æ”¹
- ğŸ’° **ä½æˆæœ¬**ï¼šåƒ…åœ¨ç™¼å¸ƒç•™è¨€æ™‚éœ€è¦å°‘é‡ Gas è²»ç”¨
- ğŸ” **å®Œå…¨é€æ˜**ï¼šæ‰€æœ‰æ“ä½œéƒ½å¯åœ¨å€å¡Šéˆä¸Šé©—è­‰
- ğŸ“± **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šæ”¯æ´æ¡Œé¢å’Œè¡Œå‹•è£ç½®
- âš¡ **å³æ™‚æ›´æ–°**ï¼šä½¿ç”¨äº‹ä»¶ç›£è½å¯¦ç¾å³æ™‚ç•™è¨€æ›´æ–°

---

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒæŠ€è¡“æ£§

| æŠ€è¡“é ˜åŸŸ | ä½¿ç”¨æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|---------|---------|------|------|
| **å‰ç«¯æ¡†æ¶** | Next.js | 14.x | React å…¨ç«¯æ¡†æ¶ |
| **å€å¡Šéˆé–‹ç™¼** | Hardhat | 2.22.x | æ™ºèƒ½åˆç´„é–‹ç™¼ç’°å¢ƒ |
| **Web3 æ•´åˆ** | Wagmi + Viem | æœ€æ–° | å€å¡Šéˆäº’å‹• |
| **éŒ¢åŒ…é€£æ¥** | RainbowKit | æœ€æ–° | å¤šéŒ¢åŒ…æ”¯æ´ |
| **åˆ†æ•£å¼å„²å­˜** | IPFS | - | å…§å®¹å„²å­˜ |
| **æ¨£å¼ç³»çµ±** | Tailwind CSS | 3.x | UI æ¨£å¼ |
| **é–‹ç™¼èªè¨€** | TypeScript | 5.8+ | å‹åˆ¥å®‰å…¨ |

### ç³»çµ±æ¶æ§‹åœ–

```mermaid
graph TB
    A[ä½¿ç”¨è€…] --> B[Web å‰ç«¯]
    B --> C[RainbowKit éŒ¢åŒ…]
    B --> D[IPFS ç¯€é»]
    C --> E[ä»¥å¤ªåŠç¶²è·¯]
    E --> F[MessageBoard åˆç´„]
    D --> G[IPFS ç¶²è·¯]
    F --> H[äº‹ä»¶æ—¥èªŒ]
    G --> I[åˆ†æ•£å¼å…§å®¹]
    
    subgraph "å‰ç«¯å±¤"
        B
        J[React Components]
        K[Custom Hooks]
    end
    
    subgraph "å€å¡Šéˆå±¤"
        E
        F
        H
    end
    
    subgraph "å„²å­˜å±¤"
        G
        I
    end
```

### è³‡æ–™æµç¨‹

1. **ç™¼å¸ƒç•™è¨€**ï¼šä½¿ç”¨è€…æ’°å¯«ç•™è¨€ â†’ ä¸Šå‚³è‡³ IPFS â†’ ç²å¾— CID â†’ å‘¼å«æ™ºèƒ½åˆç´„å„²å­˜ CID
2. **è®€å–ç•™è¨€**ï¼šæŸ¥è©¢æ™ºèƒ½åˆç´„ç²å¾— CID åˆ—è¡¨ â†’ å¾ IPFS ç²å–å…§å®¹ â†’ æ¸²æŸ“è‡³å‰ç«¯
3. **å³æ™‚æ›´æ–°**ï¼šç›£è½åˆç´„äº‹ä»¶ â†’ è‡ªå‹•ç²å–æ–°ç•™è¨€ â†’ æ›´æ–° UI

---

## ğŸ“– åŠŸèƒ½ä»‹ç´¹

### ğŸ”¥ æ ¸å¿ƒåŠŸèƒ½

#### ğŸ“ ç•™è¨€ç™¼å¸ƒ
- **Markdown æ”¯æ´**ï¼šæ”¯æ´è±å¯Œçš„æ–‡å­—æ ¼å¼
- **IPFS æ•´åˆ**ï¼šè‡ªå‹•ä¸Šå‚³è‡³ IPFS ä¸¦ç²å¾—æ°¸ä¹…é€£çµ
- **å³æ™‚ç¢ºèª**ï¼šäº¤æ˜“ç¢ºèªå¾Œç«‹å³é¡¯ç¤º
- **éŒ¯èª¤è™•ç†**ï¼šå®Œå–„çš„éŒ¯èª¤æç¤ºå’Œé‡è©¦æ©Ÿåˆ¶

#### ğŸ“š ç•™è¨€ç€è¦½
- **å¤šç¨®æª¢è¦–æ¨¡å¼**ï¼šå…¨éƒ¨ç•™è¨€ã€æœ€æ–°ç•™è¨€ã€ä½¿ç”¨è€…ç•™è¨€
- **åˆ†é è¼‰å…¥**ï¼šæ”¯æ´å¤§é‡ç•™è¨€çš„é«˜æ•ˆè¼‰å…¥
- **å³æ™‚æ›´æ–°**ï¼šæ–°ç•™è¨€è‡ªå‹•å‡ºç¾ï¼Œç„¡éœ€é‡æ–°æ•´ç†
- **å…§å®¹æ¸²æŸ“**ï¼šæ”¯æ´ Markdown æ ¼å¼çš„ç¾è§€é¡¯ç¤º

#### ğŸ‘¤ ä½¿ç”¨è€…åŠŸèƒ½
- **å¤šéŒ¢åŒ…æ”¯æ´**ï¼šMetaMaskã€WalletConnect ç­‰ä¸»æµéŒ¢åŒ…
- **åœ°å€å±•ç¤º**ï¼šç¾è§€çš„åœ°å€ç¸®å¯«å’Œé ­åƒ
- **ç•™è¨€çµ±è¨ˆ**ï¼šé¡¯ç¤ºä½¿ç”¨è€…ç™¼å¸ƒçš„ç•™è¨€æ•¸é‡
- **æ“ä½œæ­·å²**ï¼šè¿½è¹¤ä½¿ç”¨è€…çš„æ‰€æœ‰æ“ä½œ

### ğŸ› ï¸ ç®¡ç†åŠŸèƒ½

#### ğŸ” åˆç´„ç®¡ç†
- **ç·Šæ€¥æš«åœ**ï¼šåˆç´„æ“æœ‰è€…å¯æš«åœç•™è¨€ç™¼å¸ƒ
- **æ“æœ‰æ¬Šè½‰ç§»**ï¼šæ”¯æ´å®‰å…¨çš„æ“æœ‰æ¬Šè½‰ç§»
- **ç‹€æ…‹ç›£æ§**ï¼šå³æ™‚ç›£æ§åˆç´„ç‹€æ…‹

#### ğŸ“Š çµ±è¨ˆè³‡è¨Š
- **ç¸½ç•™è¨€æ•¸**ï¼šé¡¯ç¤ºå¹³å°ç¸½ç•™è¨€æ•¸é‡
- **ä½¿ç”¨è€…çµ±è¨ˆ**ï¼šå„ä½¿ç”¨è€…çš„æ´»èºåº¦çµ±è¨ˆ
- **ç¶²è·¯è³‡è¨Š**ï¼šç•¶å‰ç¶²è·¯ç‹€æ…‹å’Œ Gas åƒ¹æ ¼

### ğŸ” é€²éšåŠŸèƒ½

#### ğŸ¨ ä½¿ç”¨è€…é«”é©—
- **æ·±è‰²æ¨¡å¼**ï¼šæ”¯æ´æ·ºè‰²/æ·±è‰²ä¸»é¡Œåˆ‡æ›
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šå®Œç¾é©é…å„ç¨®è¢å¹•å°ºå¯¸
- **è¼‰å…¥ç‹€æ…‹**ï¼šå„ªé›…çš„è¼‰å…¥å‹•ç•«å’Œé€²åº¦æç¤º
- **éŒ¯èª¤é‚Šç•Œ**ï¼šé˜²æ­¢æ‡‰ç”¨å´©æ½°çš„éŒ¯èª¤è™•ç†

#### âš¡ æ•ˆèƒ½å„ªåŒ–
- **å…§å®¹å¿«å–**ï¼šæ™ºèƒ½å¿«å– IPFS å…§å®¹
- **æ‰¹æ¬¡è¼‰å…¥**ï¼šé«˜æ•ˆçš„æ‰¹æ¬¡è³‡æ–™è¼‰å…¥
- **æ‡¶è¼‰å…¥**ï¼šæŒ‰éœ€è¼‰å…¥ç•™è¨€å…§å®¹
- **äº‹ä»¶è¨‚é–±**ï¼šé«˜æ•ˆçš„å€å¡Šéˆäº‹ä»¶ç›£è½

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ğŸ“‹ ç³»çµ±éœ€æ±‚

åœ¨é–‹å§‹ä¹‹å‰ï¼Œè«‹ç¢ºä¿æ‚¨çš„ç³»çµ±å·²å®‰è£ï¼š

- **Node.js** >= 20.18.3
- **Yarn** 1.x æˆ– 2.x+
- **Git**
- **Web3 éŒ¢åŒ…**ï¼ˆå¦‚ MetaMaskï¼‰

### âš¡ ä¸€éµå•Ÿå‹•

```bash
# 1. è¤‡è£½å°ˆæ¡ˆ
git clone <your-repo-url>
cd 142-se2-message-board

# 2. å®‰è£ä¾è³´
yarn install

# 3. å•Ÿå‹•æœ¬åœ°å€å¡Šéˆï¼ˆçµ‚ç«¯ 1ï¼‰
yarn chain

# 4. éƒ¨ç½²åˆç´„ï¼ˆçµ‚ç«¯ 2ï¼‰
yarn deploy

# 5. å•Ÿå‹•å‰ç«¯ï¼ˆçµ‚ç«¯ 3ï¼‰
yarn start
```

### ğŸŒ è¨ªå•æ‡‰ç”¨

- **å‰ç«¯æ‡‰ç”¨**ï¼šhttp://localhost:3000
- **åˆç´„é™¤éŒ¯**ï¼šhttp://localhost:3000/debug
- **å€å¡Šç€è¦½å™¨**ï¼šhttp://localhost:3000/blockexplorer

---

## ğŸ“± ä½¿ç”¨æŒ‡å—

### ğŸ’° éŒ¢åŒ…è¨­å®š

1. **å®‰è£ MetaMask**
   - å‰å¾€ [metamask.io](https://metamask.io) å®‰è£ç€è¦½å™¨æ“´å……åŠŸèƒ½
   - å»ºç«‹æ–°éŒ¢åŒ…æˆ–åŒ¯å…¥ç¾æœ‰éŒ¢åŒ…

2. **æ–°å¢æœ¬åœ°ç¶²è·¯**
   ```
   ç¶²è·¯åç¨±ï¼šLocalhost 8545
   RPC URLï¼šhttp://127.0.0.1:8545
   éˆ IDï¼š31337
   è²¨å¹£ç¬¦è™Ÿï¼šETH
   ```

3. **åŒ¯å…¥æ¸¬è©¦å¸³æˆ¶**
   - ä½¿ç”¨ `yarn chain` é¡¯ç¤ºçš„æ¸¬è©¦ç§é‘°
   - æ¯å€‹å¸³æˆ¶éƒ½æœ‰ 10,000 ETH ä¾›æ¸¬è©¦ä½¿ç”¨

### âœï¸ ç™¼å¸ƒç•™è¨€

1. **é€£æ¥éŒ¢åŒ…**
   - é»æ“Šå³ä¸Šè§’çš„ã€ŒConnect Walletã€æŒ‰éˆ•
   - é¸æ“‡æ‚¨çš„éŒ¢åŒ…ä¸¦æˆæ¬Šé€£æ¥

2. **æ’°å¯«ç•™è¨€**
   - åœ¨é¦–é çš„ç•™è¨€è¼¸å…¥æ¡†ä¸­æ’°å¯«å…§å®¹
   - æ”¯æ´ Markdown èªæ³•ï¼Œå¯é è¦½æ•ˆæœ

3. **ç™¼å¸ƒç•™è¨€**
   - é»æ“Šã€Œç™¼å¸ƒç•™è¨€ã€æŒ‰éˆ•
   - ç¢ºèªäº¤æ˜“ä¸¦ç­‰å¾…å€å¡Šç¢ºèª

4. **æŸ¥çœ‹çµæœ**
   - ç•™è¨€æœƒè‡ªå‹•å‡ºç¾åœ¨ç•™è¨€åˆ—è¡¨ä¸­
   - å¯åœ¨å€å¡Šç€è¦½å™¨ä¸­æŸ¥çœ‹äº¤æ˜“è©³æƒ…

### ğŸ” ç€è¦½ç•™è¨€

- **å…¨éƒ¨ç•™è¨€**ï¼šåœ¨é¦–é æŸ¥çœ‹æ‰€æœ‰ç•™è¨€
- **æœ€æ–°ç•™è¨€**ï¼šè‡ªå‹•è¼‰å…¥æœ€æ–°ç™¼å¸ƒçš„ç•™è¨€
- **ä½¿ç”¨è€…ç•™è¨€**ï¼šé»æ“Šåœ°å€æŸ¥çœ‹ç‰¹å®šä½¿ç”¨è€…çš„ç•™è¨€
- **ç•™è¨€è©³æƒ…**ï¼šé»æ“Šç•™è¨€å¡ç‰‡æŸ¥çœ‹å®Œæ•´å…§å®¹

---

## ğŸ”§ é–‹ç™¼æŒ‡å—

### ğŸ“ å°ˆæ¡ˆçµæ§‹

```
142-se2-message-board/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ hardhat/                    # æ™ºèƒ½åˆç´„é–‹ç™¼
â”‚   â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”‚   â””â”€â”€ MessageBoard.sol    # ä¸»è¦åˆç´„
â”‚   â”‚   â”œâ”€â”€ deploy/                 # éƒ¨ç½²è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ test/                   # åˆç´„æ¸¬è©¦
â”‚   â”‚   â””â”€â”€ hardhat.config.ts       # Hardhat é…ç½®
â”‚   â””â”€â”€ nextjs/                     # å‰ç«¯æ‡‰ç”¨
â”‚       â”œâ”€â”€ app/                    # Next.js App Router
â”‚       â”œâ”€â”€ components/             # React çµ„ä»¶
â”‚       â”œâ”€â”€ hooks/                  # è‡ªå®šç¾© Hooks
â”‚       â”œâ”€â”€ contracts/              # åˆç´„ ABI å’Œåœ°å€
â”‚       â””â”€â”€ scaffold.config.ts      # å‰ç«¯é…ç½®
â”œâ”€â”€ package.json                    # æ ¹ç›®éŒ„é…ç½®
â””â”€â”€ README.md                      # å°ˆæ¡ˆèªªæ˜
```

### ğŸ§ª æ™ºèƒ½åˆç´„é–‹ç™¼

#### åˆç´„æ¶æ§‹

```solidity
contract MessageBoard {
    // ç•™è¨€çµæ§‹
    struct Message {
        address sender;      // ç™¼é€è€…
        uint256 timestamp;   // æ™‚é–“æˆ³
        string ipfsCid;      // IPFS CID
        uint256 messageId;   // ç•™è¨€ ID
    }
    
    // ä¸»è¦åŠŸèƒ½
    function postMessage(string calldata _ipfsCid) external;
    function getAllMessages() external view returns (Message[] memory);
    function getUserMessages(address _user) external view returns (Message[] memory);
}
```

#### æ¸¬è©¦åˆç´„

```bash
# ç·¨è­¯åˆç´„
yarn compile

# åŸ·è¡Œæ¸¬è©¦
yarn test

# æ¸¬è©¦è¦†è“‹ç‡
yarn hardhat:test --coverage

# éƒ¨ç½²åˆ°æœ¬åœ°
yarn deploy

# éƒ¨ç½²åˆ°æ¸¬è©¦ç¶²
yarn deploy --network sepolia
```

### ğŸ¨ å‰ç«¯é–‹ç™¼

#### æ ¸å¿ƒ Hooks

```typescript
// è®€å–åˆç´„è³‡æ–™
const { data: messages } = useScaffoldReadContract({
  contractName: "MessageBoard",
  functionName: "getAllMessages",
});

// å¯«å…¥åˆç´„è³‡æ–™
const { writeContractAsync } = useScaffoldWriteContract({
  contractName: "MessageBoard",
});

// ç›£è½åˆç´„äº‹ä»¶
const { data: events } = useScaffoldEventHistory({
  contractName: "MessageBoard",
  eventName: "MessagePosted",
  watch: true,
});
```

#### IPFS æ•´åˆ

```typescript
// ä¸Šå‚³å…§å®¹è‡³ IPFS
const uploadToIPFS = async (content: string) => {
  const response = await fetch('/api/upload-to-ipfs', {
    method: 'POST',
    body: JSON.stringify({ content }),
  });
  return response.json();
};

// å¾ IPFS ç²å–å…§å®¹
const fetchFromIPFS = async (cid: string) => {
  const response = await fetch(`/api/get-from-ipfs?cid=${cid}`);
  return response.text();
};
```

### ğŸš€ éƒ¨ç½²æŒ‡å—

#### æœ¬åœ°éƒ¨ç½²

```bash
# 1. å•Ÿå‹•æœ¬åœ°å€å¡Šéˆ
yarn chain

# 2. éƒ¨ç½²åˆç´„
yarn deploy

# 3. å•Ÿå‹•å‰ç«¯
yarn start
```

#### æ¸¬è©¦ç¶²éƒ¨ç½²

1. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   ```bash
   # .env.local
   DEPLOYER_PRIVATE_KEY=your_private_key
   ALCHEMY_API_KEY=your_alchemy_key
   ```

2. **ä¿®æ”¹ç¶²è·¯é…ç½®**
   ```typescript
   // scaffold.config.ts
   targetNetworks: [chains.sepolia]
   ```

3. **åŸ·è¡Œéƒ¨ç½²**
   ```bash
   yarn deploy --network sepolia
   ```

#### ä¸»ç¶²éƒ¨ç½²

âš ï¸ **æ³¨æ„**ï¼šä¸»ç¶²éƒ¨ç½²éœ€è¦çœŸå¯¦çš„ ETHï¼Œè«‹ç¢ºä¿ï¼š
- å……åˆ†æ¸¬è©¦åˆç´„åŠŸèƒ½
- é€²è¡Œå®‰å…¨å¯©è¨ˆ
- æº–å‚™è¶³å¤ çš„ Gas è²»ç”¨

```bash
# éƒ¨ç½²åˆ°ä¸»ç¶²
yarn deploy --network mainnet

# é©—è­‰åˆç´„
yarn verify --network mainnet
```

---

## ğŸ§ª æ¸¬è©¦æŒ‡å—

### ğŸ”¬ åˆç´„æ¸¬è©¦

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
yarn test

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦
yarn hardhat:test --grep "MessageBoard"

# ç”Ÿæˆæ¸¬è©¦å ±å‘Š
yarn hardhat:test --reporter html

# æª¢æŸ¥æ¸¬è©¦è¦†è“‹ç‡
yarn hardhat:test --coverage
```

### ğŸŒ å‰ç«¯æ¸¬è©¦

```bash
# å–®å…ƒæ¸¬è©¦
yarn next:test

# E2E æ¸¬è©¦
yarn next:test:e2e

# çµ„ä»¶æ¸¬è©¦
yarn next:test:components
```

### ğŸ“Š æ•ˆèƒ½æ¸¬è©¦

```bash
# åˆç´„ Gas åˆ†æ
REPORT_GAS=true yarn test

# å‰ç«¯æ•ˆèƒ½åˆ†æ
yarn next:analyze

# Bundle å¤§å°åˆ†æ
yarn next:bundle-analyzer
```

---

## ğŸ“š API åƒè€ƒ

### ğŸ”— æ™ºèƒ½åˆç´„ API

#### è®€å–å‡½å¼

| å‡½å¼åç¨± | åƒæ•¸ | å›å‚³å€¼ | æè¿° |
|---------|------|--------|------|
| `getAllMessages()` | - | `Message[]` | ç²å–æ‰€æœ‰ç•™è¨€ |
| `getMessage(uint256)` | messageId | `Message` | ç²å–ç‰¹å®šç•™è¨€ |
| `getLatestMessages(uint256)` | count | `Message[]` | ç²å–æœ€æ–° N å‰‡ç•™è¨€ |
| `getUserMessages(address)` | user | `Message[]` | ç²å–ä½¿ç”¨è€…ç•™è¨€ |
| `getTotalMessages()` | - | `uint256` | ç²å–ç•™è¨€ç¸½æ•¸ |

#### å¯«å…¥å‡½å¼

| å‡½å¼åç¨± | åƒæ•¸ | Gas ä¼°ç®— | æè¿° |
|---------|------|---------|------|
| `postMessage(string)` | ipfsCid | ~50,000 | ç™¼å¸ƒæ–°ç•™è¨€ |
| `setPaused(bool)` | paused | ~30,000 | æš«åœ/æ¢å¾©åˆç´„ |
| `transferOwnership(address)` | newOwner | ~30,000 | è½‰ç§»æ“æœ‰æ¬Š |

#### äº‹ä»¶

| äº‹ä»¶åç¨± | åƒæ•¸ | æè¿° |
|---------|------|------|
| `MessagePosted` | messageId, sender, timestamp, ipfsCid | ç•™è¨€ç™¼å¸ƒäº‹ä»¶ |
| `BoardStatusChanged` | isPaused | ç‹€æ…‹è®Šæ›´äº‹ä»¶ |

### ğŸŒ å‰ç«¯ API

#### IPFS API è·¯ç”±

```typescript
// POST /api/upload-to-ipfs
interface UploadRequest {
  content: string;
  metadata?: object;
}

interface UploadResponse {
  success: boolean;
  cid: string;
  error?: string;
}

// GET /api/get-from-ipfs?cid=<CID>
interface GetResponse {
  success: boolean;
  content: string;
  error?: string;
}
```

---

## ğŸ›¡ï¸ å®‰å…¨è€ƒé‡

### ğŸ”’ æ™ºèƒ½åˆç´„å®‰å…¨

- **é‡å…¥æ”»æ“Šé˜²è­·**ï¼šä½¿ç”¨ OpenZeppelin çš„ ReentrancyGuard
- **æ•´æ•¸æº¢ä½ä¿è­·**ï¼šSolidity 0.8+ å…§å»ºä¿è­·
- **å­˜å–æ§åˆ¶**ï¼šä½¿ç”¨ modifier é™åˆ¶æ•æ„Ÿå‡½å¼
- **è¼¸å…¥é©—è­‰**ï¼šåš´æ ¼é©—è­‰æ‰€æœ‰è¼¸å…¥åƒæ•¸

### ğŸ›¡ï¸ å‰ç«¯å®‰å…¨

- **XSS é˜²è­·**ï¼šæ‰€æœ‰ä½¿ç”¨è€…è¼¸å…¥éƒ½ç¶“éæ¸…ç†
- **CSRF é˜²è­·**ï¼šä½¿ç”¨ CSRF token
- **å…§å®¹é©—è­‰**ï¼šé©—è­‰ IPFS å…§å®¹å®Œæ•´æ€§
- **éŒ¯èª¤è™•ç†**ï¼šä¸æ´©éœ²æ•æ„Ÿè³‡è¨Š

### ğŸ” æœ€ä½³å¯¦è¸

1. **ç§é‘°ç®¡ç†**ï¼šæ°¸é ä¸è¦åœ¨ä»£ç¢¼ä¸­ç¡¬ç·¨ç¢¼ç§é‘°
2. **ç’°å¢ƒéš”é›¢**ï¼šå€åˆ†é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç’°å¢ƒ
3. **å®šæœŸæ›´æ–°**ï¼šä¿æŒä¾è³´å¥—ä»¶æœ€æ–°ç‰ˆæœ¬
4. **å®‰å…¨å¯©è¨ˆ**ï¼šå®šæœŸé€²è¡Œå®‰å…¨å¯©è¨ˆ

---

## ğŸ› ç–‘é›£æ’è§£

### â“ å¸¸è¦‹å•é¡Œ

#### åˆç´„éƒ¨ç½²å¤±æ•—

**å•é¡Œ**ï¼š`Error: Transaction ran out of gas`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// hardhat.config.ts
networks: {
  localhost: {
    gas: 5000000,
    gasPrice: 8000000000,
  },
}
```

#### å‰ç«¯ç„¡æ³•é€£æ¥åˆç´„

**å•é¡Œ**ï¼š`Contract not found`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºèª `yarn chain` æ­£åœ¨é‹è¡Œ
2. é‡æ–°éƒ¨ç½²åˆç´„ï¼š`yarn deploy`
3. é‡æ–°å•Ÿå‹•å‰ç«¯ï¼š`yarn start`

#### IPFS ä¸Šå‚³å¤±æ•—

**å•é¡Œ**ï¼š`IPFS upload timeout`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥ç¶²è·¯é€£æ¥
2. å˜—è©¦ä½¿ç”¨ä¸åŒçš„ IPFS ç¯€é»
3. æ¸›å°ä¸Šå‚³å…§å®¹å¤§å°

#### MetaMask é€£æ¥å•é¡Œ

**å•é¡Œ**ï¼š`Unsupported chain`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. åœ¨ MetaMask ä¸­æ·»åŠ æœ¬åœ°ç¶²è·¯
2. ç¢ºèªéˆ ID ç‚º 31337
3. é‡æ–°æ•´ç†é é¢ä¸¦é‡æ–°é€£æ¥

### ğŸ”§ é™¤éŒ¯å·¥å…·

```bash
# æŸ¥çœ‹åˆç´„äº‹ä»¶
yarn hardhat console --network localhost

# æª¢æŸ¥ IPFS ç‹€æ…‹
curl http://localhost:5001/api/v0/id

# å‰ç«¯é™¤éŒ¯æ¨¡å¼
yarn start --debug

# æŸ¥çœ‹äº¤æ˜“è©³æƒ…
yarn hardhat run scripts/debug-transaction.ts
```

---

## ğŸ¤ è²¢ç»æŒ‡å—

æˆ‘å€‘æ­¡è¿æ‰€æœ‰å½¢å¼çš„è²¢ç»ï¼ç„¡è«–æ˜¯éŒ¯èª¤ä¿®å¾©ã€åŠŸèƒ½å¢å¼·é‚„æ˜¯æ–‡æª”æ”¹é€²ã€‚

### ğŸ“ å¦‚ä½•è²¢ç»

1. **Fork å°ˆæ¡ˆ**
   ```bash
   git fork https://github.com/your-username/142-se2-message-board
   ```

2. **å»ºç«‹åˆ†æ”¯**
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **æäº¤è®Šæ›´**
   ```bash
   git commit -m "feat: add your feature description"
   ```

4. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/your-feature-name
   ```

5. **å»ºç«‹ Pull Request**
   - æè¿°æ‚¨çš„è®Šæ›´
   - åŒ…å«ç›¸é—œçš„æ¸¬è©¦
   - ç¢ºä¿æ‰€æœ‰æª¢æŸ¥é€šé

### ğŸ¯ è²¢ç»é ˜åŸŸ

- ğŸ› **éŒ¯èª¤ä¿®å¾©**ï¼šä¿®å¾©å·²çŸ¥å•é¡Œ
- âœ¨ **æ–°åŠŸèƒ½**ï¼šæ·»åŠ æœ‰ç”¨çš„æ–°åŠŸèƒ½
- ğŸ“– **æ–‡æª”æ”¹é€²**ï¼šæ”¹å–„æ–‡æª”å’Œè¨»é‡‹
- ğŸ§ª **æ¸¬è©¦å¢å¼·**ï¼šå¢åŠ æ¸¬è©¦è¦†è“‹ç‡
- ğŸ¨ **UI/UX æ”¹é€²**ï¼šæå‡ä½¿ç”¨è€…é«”é©—
- âš¡ **æ•ˆèƒ½å„ªåŒ–**ï¼šæé«˜æ‡‰ç”¨æ•ˆèƒ½

### ğŸ“‹ ä»£ç¢¼è¦ç¯„

- ä½¿ç”¨ TypeScript é€²è¡Œé–‹ç™¼
- éµå¾ª ESLint å’Œ Prettier è¦ç¯„
- ç‚ºæ–°åŠŸèƒ½ç·¨å¯«æ¸¬è©¦
- æ›´æ–°ç›¸é—œæ–‡æª”

---

## ğŸ“„ æˆæ¬Šè³‡è¨Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ã€‚è©³æƒ…è«‹åƒé–± [LICENSE](./LICENSE) æª”æ¡ˆã€‚

### ğŸ™ è‡´è¬

- **Scaffold-ETH 2** - æä¾›å„ªç§€çš„é–‹ç™¼æ¡†æ¶
- **IPFS** - æä¾›å»ä¸­å¿ƒåŒ–å„²å­˜è§£æ±ºæ–¹æ¡ˆ
- **Ethereum** - æä¾›å€å¡ŠéˆåŸºç¤è¨­æ–½
- **æ‰€æœ‰è²¢ç»è€…** - æ„Ÿè¬æ¯ä¸€ä½è²¢ç»è€…çš„ä»˜å‡º

---

## ğŸ”— ç›¸é—œé€£çµ

### ğŸ“š å­¸ç¿’è³‡æº

- [141-IPFS-course-v2](../141-IPFS-course-v2/) - ç›¸é—œèª²ç¨‹ææ–™
- [Scaffold-ETH 2 æ–‡æª”](https://docs.scaffoldeth.io/)
- [IPFS æ–‡æª”](https://docs.ipfs.io/)
- [Solidity æ–‡æª”](https://docs.soliditylang.org/)

### ğŸ› ï¸ é–‹ç™¼å·¥å…·

- [Hardhat](https://hardhat.org/) - æ™ºèƒ½åˆç´„é–‹ç™¼ç’°å¢ƒ
- [Next.js](https://nextjs.org/) - React å…¨ç«¯æ¡†æ¶
- [Wagmi](https://wagmi.sh/) - React Hooks for Ethereum
- [RainbowKit](https://www.rainbowkit.com/) - éŒ¢åŒ…é€£æ¥åº«

### ğŸŒ ç¤¾ç¾¤é€£çµ

- [GitHub Issues](https://github.com/your-username/142-se2-message-board/issues) - å•é¡Œå›å ±
- [GitHub Discussions](https://github.com/your-username/142-se2-message-board/discussions) - è¨è«–å€
- [Discord](https://discord.gg/your-discord) - å³æ™‚è¨è«–

---

<div align="center">

**ğŸ‰ æ„Ÿè¬ä½¿ç”¨ IPFS å»ä¸­å¿ƒåŒ–ç•™è¨€æ¿ï¼**

å¦‚æœé€™å€‹å°ˆæ¡ˆå°æ‚¨æœ‰å¹«åŠ©ï¼Œè«‹çµ¦æˆ‘å€‘ä¸€å€‹ â­ï¸

[å›åˆ°é ‚éƒ¨](#-ipfs-å»ä¸­å¿ƒåŒ–ç•™è¨€æ¿--ipfs-decentralized-message-board) â€¢ [å ±å‘Šå•é¡Œ](https://github.com/your-username/142-se2-message-board/issues) â€¢ [åŠŸèƒ½å»ºè­°](https://github.com/your-username/142-se2-message-board/discussions)

---

*å»ºæ§‹æ–¼ 2024 å¹´ â€¢ ä½¿ç”¨ â¤ï¸ å’Œ â˜• è£½ä½œ*

</div>