# 編寫自動化測試

Edsger W. Dijkstra 曾在 1972 年的演講「謙遜的程式設計師」中提到：「程式測試是個證明程式錯誤存在非常有效的方法，但要證明它不存在卻反而顯得十分無力。」這不代表我們不應該盡可能地做測試！

程式碼的正確性意謂著我們的程式碼可以如我們的預期執行。Rust 就被設計為特別注重程式的正確性，但正確性是很複雜且難以證明的。Rust 的型別系統就承擔了很大一部分的負擔，但是型別系統還是沒辦法抓到全部。所以 Rust 在語言內提供了編寫自動化程式測試的支援。

假設我們要寫個程式叫做 `add_two`，其會將傳入任意數字加上 2。此函式簽名接受整數作為參數並回傳一個整數作為結果。當我們實作並編譯函式時，Rust 會做所有你已經學過的型別檢查與借用檢查，來確保像是我們不會中傳入 `String` 數值或任意無效參考至此函式。但 Rust **無法**檢查其是否能執行我們預期此函式會完成的任務，也就是回傳加上 2 的參數。說不定它會將參數加上 10 或減 50！這就是我們要做測試的地方。

舉例來說，我們可以寫測試來判定當我們傳入 `3` 給函式 `add_two` 時，回傳值是不是 `5`。我們可以再變更我們的程式碼時來執行這些測試，以確保原本就正確的行為不會被改變。

測試是個複雜的技能，雖然我們無法在一個章節就涵蓋如何寫出好測試的細節，但我們還是會討論 Rust 測試功能機制。我們會介紹當你寫測試時可以用的詮釋與巨集、執行測試時的預設行為與選項以及如何組織測試成單元測試與整合測試。
