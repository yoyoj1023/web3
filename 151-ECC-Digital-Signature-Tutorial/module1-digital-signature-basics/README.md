# 模組一：數位簽章基礎

## 📚 學習目標

完成本模組後，您將能夠：
- ✅ 理解數位簽章的基本概念和定義
- ✅ 掌握數位簽章的三大核心功能
- ✅ 了解數位簽章與傳統簽名的區別
- ✅ 認識數位簽章的實際應用場景

**預計學習時間：** 2-3 小時

---

## 1. 什麼是數位簽章？

### 1.1 概念定義

**數位簽章（Digital Signature）**是一種數學技術，用於驗證數位訊息或文件的真實性和完整性。

想像一下，在紙本文件上，我們用親筆簽名來證明：
- 📝 這份文件確實由「我」所簽署
- ✅ 文件內容未經他人竄改
- 🔒 我無法否認曾經簽署過這份文件

數位簽章在數位世界中扮演同樣的角色，但提供了更強的安全保障！

### 1.2 與傳統簽名的對比

| 特性 | 傳統簽名 | 數位簽章 |
|------|----------|----------|
| **驗證方式** | 筆跡比對（主觀） | 數學驗證（客觀） |
| **可複製性** | 容易偽造 | 數學上不可偽造 |
| **完整性保護** | 無法保證 | 確保內容未被修改 |
| **可否認性** | 可能否認 | 數學上不可否認 |
| **驗證成本** | 需要專家 | 任何人都能驗證 |
| **綁定性** | 與簽名者綁定 | 與簽名者和內容綁定 |

**重要區別：**
- 傳統簽名：同一個人的簽名在不同文件上「看起來相似」
- 數位簽章：同一個人對不同內容的簽章「完全不同」（因為與內容綁定）

---

## 2. 數位簽章的三大功能

數位簽章具備三個核心功能，這也是密碼學中數位簽章方案必須滿足的基本要求：

### 2.1 身份驗證 (Authentication)

**定義：** 確認簽署者的身份，證明訊息確實由聲稱的發送者所簽署。

**實例：**
```
Alice 想發送一則訊息給 Bob：「請將 10 BTC 轉給 Charlie」

問題：Bob 如何確認這則訊息真的來自 Alice，而不是有人冒充？

解決：Alice 使用她的私鑰對訊息進行簽名。
      Bob 使用 Alice 的公鑰驗證簽名。
      驗證成功 → 確認訊息來自 Alice
```

**關鍵點：**
- 只有擁有私鑰的人才能產生有效簽章
- 任何人都可以用公鑰驗證簽章
- 公鑰與特定身份綁定

### 2.2 完整性 (Integrity)

**定義：** 確保訊息在傳輸過程中沒有被修改，即使是一個字元的改變也能被檢測出來。

**實例：**
```
Alice 簽署訊息：「轉帳 10 BTC 給 Charlie」
攻擊者嘗試修改為：「轉帳 100 BTC 給 Charlie」

結果：Bob 用 Alice 的公鑰驗證時，會發現簽章無效
原因：簽章是針對原始訊息計算的，內容改變後簽章不再匹配
```

**關鍵點：**
- 數位簽章與訊息內容緊密綁定
- 任何內容的修改都會導致驗證失敗
- 這是通過雜湊函數實現的（後續模組會詳細說明）

### 2.3 不可否認性 (Non-repudiation)

**定義：** 簽署者事後無法否認自己簽署過該訊息。

**實例：**
```
Alice 簽署了一份電子合約
一週後，Alice 聲稱：「我從未簽過這份合約！」

但是：合約上有 Alice 的數位簽章
      任何第三方都可以用 Alice 的公鑰驗證
      驗證成功 → Alice 無法否認

前提：Alice 的私鑰未洩露
```

**關鍵點：**
- 私鑰的唯一性保證了不可否認性
- 只有私鑰持有者能產生有效簽章
- 可以向第三方（如法院）證明簽署行為

**重要注意：**
不可否認性的前提是私鑰的安全性。如果私鑰洩露，簽署者可以聲稱是他人冒用。

---

## 3. 數位簽章的基本運作原理

### 3.1 公私鑰系統

數位簽章基於**非對稱密碼學**（也稱公鑰密碼學）：

```
每個使用者擁有一對金鑰：
┌─────────────────────────────────────────────┐
│                                             │
│  私鑰 (Private Key)    公鑰 (Public Key)    │
│  ─────────────────    ────────────────────  │
│  • 保密                • 公開               │
│  • 用於簽名            • 用於驗證           │
│  • 絕不能洩露          • 可以廣泛分發       │
│                                             │
└─────────────────────────────────────────────┘
```

**數學關係：**
- 公鑰和私鑰有數學上的關聯
- 從公鑰幾乎不可能推導出私鑰（單向函數）
- 用私鑰簽名的內容，可以用對應的公鑰驗證

### 3.2 簽署流程（簡化版）

```
Alice 想要簽署一則訊息：

1. Alice 有一則訊息 M
   ↓
2. Alice 使用她的私鑰 SK_Alice
   ↓
3. 進行數學運算
   ↓
4. 產生數位簽章 S
   ↓
5. Alice 發送 (M, S) 給 Bob
```

### 3.3 驗證流程（簡化版）

```
Bob 收到 (M, S) 後：

1. Bob 取得 Alice 的公鑰 PK_Alice（公開的）
   ↓
2. 使用 PK_Alice 和收到的 M、S
   ↓
3. 進行數學驗證運算
   ↓
4. 輸出結果：✅ 有效 或 ❌ 無效
```

**核心特性：**
- 簽名需要私鑰（只有 Alice 能做）
- 驗證只需要公鑰（任何人都能做）
- 驗證成功 ⟺ 簽章由對應私鑰持有者簽署，且內容未被修改

---

## 4. 數位簽章的實際應用

### 4.1 區塊鏈和加密貨幣

**Bitcoin 交易簽名：**
```
場景：Alice 要轉 1 BTC 給 Bob

1. Alice 創建交易訊息：
   "從地址 A 轉 1 BTC 到地址 B"

2. Alice 用私鑰簽署這筆交易

3. 礦工和節點驗證：
   - 使用 Alice 地址對應的公鑰驗證簽章
   - 確認 Alice 確實授權了這筆交易
   - 確認交易內容未被竄改

4. 交易被記錄到區塊鏈上
```

**為什麼重要？**
- 防止他人盜用你的比特幣
- 確保交易不會被中途修改
- 創建不可否認的交易記錄

### 4.2 電子合約和文件簽署

**應用場景：**
- 📄 PDF 文件簽署（Adobe Sign）
- 📝 電子合約平台（DocuSign）
- 🏛️ 政府公文系統
- 🏥 醫療記錄簽署

**優勢：**
- 遠程簽署，無需見面
- 自動驗證，無需人工
- 永久記錄，不可抵賴
- 法律效力（在許多國家）

### 4.3 軟體發行和更新驗證

**應用場景：**
```
軟體開發商發布新版本：

1. 開發商用私鑰簽署軟體套件
2. 發布軟體和簽章
3. 使用者下載後：
   - 用開發商的公鑰驗證簽章
   - 確認軟體未被惡意修改
   - 安心安裝
```

**實際例子：**
- 🍎 Apple App Store 應用簽名
- 🪟 Windows 驅動程式簽署
- 🐧 Linux 套件管理系統（apt, yum）

### 4.4 SSL/TLS 憑證

**網站身份驗證：**
```
當你訪問 https://www.example.com：

1. 網站出示數位憑證
2. 憑證包含網站的公鑰
3. 憑證由可信任的證書頒發機構（CA）簽署
4. 瀏覽器驗證 CA 的簽章
5. 確認你確實連接到正確的網站
```

**保護內容：**
- 🔒 防止中間人攻擊
- ✅ 確認網站身份
- 🛡️ 保護數據傳輸

### 4.5 電子郵件簽名（S/MIME, PGP）

**應用：**
- 簽署重要郵件
- 證明發件人身份
- 確保郵件內容完整

---

## 5. 數位簽章 vs 加密

很多人容易混淆數位簽章和加密，讓我們明確區分：

### 5.1 數位簽章

```
目的：驗證身份和完整性

Alice 用私鑰簽名 → 任何人用公鑰驗證

特點：
• 內容公開可見
• 證明誰簽的
• 證明沒被改
```

### 5.2 加密

```
目的：保護隱私和機密性

Alice 用 Bob 的公鑰加密 → 只有 Bob 用私鑰解密

特點：
• 內容保密
• 只有特定接收者能讀
• 防止他人窺探
```

### 5.3 對比表格

| 特性 | 數位簽章 | 加密 |
|------|----------|------|
| **主要目的** | 身份認證、完整性 | 保密性 |
| **使用者密鑰** | 發送者私鑰簽署 | 接收者公鑰加密 |
| **驗證/解密** | 任何人可用公鑰驗證 | 只有接收者私鑰解密 |
| **內容可見性** | 公開可見 | 完全保密 |
| **解決問題** | 誰發的？有沒有被改？ | 內容是什麼？ |

### 5.4 組合使用

實際應用中常常組合使用：

```
Alice 發送機密且需要認證的訊息給 Bob：

1. Alice 用私鑰簽署訊息       [簽章]
2. Alice 用 Bob 的公鑰加密     [加密]
3. Bob 用私鑰解密             [解密]
4. Bob 用 Alice 的公鑰驗證     [驗證]

結果：
• 內容保密（只有 Bob 能讀）
• 身份確認（確定是 Alice 發的）
• 完整性（內容沒被修改）
```

---

## 6. 數位簽章的安全性基礎

### 6.1 安全性依賴

數位簽章的安全性依賴於：

1. **數學難題**
   - 從公鑰反推私鑰在計算上不可行
   - 偽造簽章在計算上不可行

2. **雜湊函數**
   - 無法找到兩個不同訊息產生相同雜湊值
   - 無法從雜湊值反推原始訊息

3. **私鑰保護**
   - 私鑰必須保密
   - 私鑰洩露 = 安全性完全喪失

### 6.2 常見的數位簽章方案

| 方案 | 基礎數學問題 | 金鑰長度 | 特點 |
|------|--------------|----------|------|
| **RSA** | 大數分解 | 2048-4096 bits | 經典、廣泛使用 |
| **ECDSA** | 橢圓曲線離散對數 | 256 bits | 短金鑰、高效率 |
| **EdDSA** | 橢圓曲線（Edwards） | 256 bits | 安全、快速 |
| **Schnorr** | 離散對數 | 256 bits | 簡單、可聚合 |

**本課程重點：ECDSA（橢圓曲線數位簽名演算法）**

---

## 7. 重點總結

### 🎯 核心概念

1. **數位簽章的定義**
   - 用數學方法驗證數位訊息的真實性和完整性
   - 類似傳統簽名，但提供更強的安全保障

2. **三大核心功能**
   - ✅ **身份驗證**：確認簽署者身份
   - ✅ **完整性**：確保內容未被修改
   - ✅ **不可否認性**：簽署者無法否認

3. **基本原理**
   - 基於公私鑰系統（非對稱密碼學）
   - 私鑰簽署，公鑰驗證
   - 數學上保證安全性

4. **實際應用**
   - 區塊鏈和加密貨幣
   - 電子合約和文件簽署
   - 軟體發行驗證
   - SSL/TLS 網站認證

### 📝 關鍵要點

```
數位簽章 = 身份證明 + 內容完整性保護 + 不可否認

私鑰（保密）→ 簽署
公鑰（公開）→ 驗證

安全性 = 數學難題 + 雜湊函數 + 私鑰保護
```

---

## 8. 思考題

在進入下一個模組之前，思考以下問題：

1. **概念理解**
   - 數位簽章的三大功能在區塊鏈交易中分別如何體現？
   - 如果私鑰洩露了，這三大功能中哪些會失效？

2. **實際應用**
   - 為什麼 HTTPS 網站需要數位憑證？它解決了什麼問題？
   - 在郵件系統中，數位簽章和加密的組合使用有什麼好處？

3. **安全性分析**
   - 如果簽章驗證失敗，可能是什麼原因造成的？
   - 數位簽章能否防止重放攻擊（replay attack）？如何防止？

---

## 9. 下一步

恭喜完成模組一！您已經理解了數位簽章的基本概念和重要性。

**接下來：**
- 📝 完成 [模組一測驗](./QUIZ.md)，檢驗您的理解
- 📚 進入 [模組二：橢圓曲線介紹](../module2-elliptic-curve-intro/)，學習 ECDSA 的數學基礎

**學習建議：**
在進入下一個模組前，確保您能夠：
- ✅ 清楚解釋數位簽章的三大功能
- ✅ 理解公私鑰系統的基本原理
- ✅ 區分數位簽章和加密的差異
- ✅ 舉例說明數位簽章的實際應用

---

**繼續加油！理解這些基礎概念將為後續學習打下堅實的基礎。** 🚀

