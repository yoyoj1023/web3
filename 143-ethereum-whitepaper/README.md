# 以太坊白皮書 (Ethereum Whitepaper)
## 作者：Vitalik Buterin (2014)

---

## 📋 目錄

1. [概述](#概述)
2. [歷史背景](#歷史背景)
3. [比特幣作為狀態轉換系統](#比特幣作為狀態轉換系統)
4. [挖礦](#挖礦)
5. [默克爾樹](#默克爾樹)
6. [替代區塊鏈應用](#替代區塊鏈應用)
7. [腳本系統](#腳本系統)
8. [以太坊](#以太坊)
9. [應用場景](#應用場景)
10. [技術考量與問題](#技術考量與問題)
11. [結論](#結論)

---

## 🎯 概述

以太坊是一個**去中心化的世界計算機**，旨在提供一個內建完全圖靈完備程式語言的區塊鏈平台。這個平台允許任何人創建智能合約和去中心化應用程式（DApps）。

### 核心創新
- **智能合約**：自動執行的合約，條件滿足時自動執行預定規則
- **圖靈完備性**：可以執行任何可計算的程序
- **去中心化自治組織（DAO）**：完全由代碼管理的組織結構
- **世界狀態**：全球共享的狀態機器

---

## 🏛️ 歷史背景

### 去中心化貨幣的演進

1. **1980-1990年代**：匿名電子現金協議（基於 Chaumian blinding）
2. **1998年**：Wei Dai 的 b-money 提案
3. **2005年**：Hal Finney 的可重複使用工作量證明
4. **2009年**：比特幣的誕生

### 比特幣的雙重創新

Satoshi Nakamoto 同時引入了兩個革命性概念：
1. **比特幣貨幣單位**：去中心化的點對點數字貨幣
2. **工作量證明區塊鏈**：解決去中心化共識問題

### 拜占庭容錯問題的解決

傳統的拜占庭容錯系統面臨的問題：
- 需要已知的參與者
- 容易受到女巫攻擊（Sybil Attack）
- 安全邊界有限（N/4 惡意節點容忍度）

比特幣的解決方案：
- 工作量證明機制
- 計算能力決定影響力
- 抵抗女巫攻擊

---

## 🔄 比特幣作為狀態轉換系統

### 狀態轉換函數

```
APPLY(S, TX) -> S' 或 ERROR
```

**範例**：
```
APPLY({Alice: $50, Bob: $50}, "從 Alice 發送 $20 給 Bob") 
= {Alice: $30, Bob: $70}
```

### UTXO 模型

比特幣的「狀態」包含：
- 所有未花費交易輸出（UTXO）
- 每個 UTXO 的面額和所有者
- 20 位元組地址（本質上是加密公鑰）

### 交易驗證流程

1. **輸入驗證**：
   - 檢查引用的 UTXO 是否存在
   - 驗證數字簽名
2. **餘額檢查**：輸入總額 ≥ 輸出總額
3. **狀態更新**：移除輸入 UTXO，添加輸出 UTXO

---

## ⛏️ 挖礦

### 去中心化共識機制

由於缺乏可信的中央服務，比特幣採用：
- **工作量證明**：解決計算難題
- **最長鏈原則**：接受最多工作量的鏈
- **經濟激勵**：區塊獎勵和交易費用

### 挖礦流程

1. 收集待確認交易
2. 構建新區塊
3. 尋找滿足難度要求的 nonce 值
4. 廣播新區塊
5. 網路驗證並接受

---

## 🌳 默克爾樹

### 結構優勢

- **高效驗證**：O(log N) 複雜度
- **輕量節點**：無需下載完整區塊
- **篡改檢測**：任何修改都會改變根哈希

### 應用場景

- 簡化支付驗證（SPV）
- 區塊鏈壓縮
- 數據完整性證明

---

## 🔗 替代區塊鏈應用

### 已知應用領域

1. **有色幣（Colored Coins）**：代表自定義貨幣和金融工具
2. **智能財產**：物理設備所有權
3. **域名系統**：如 Namecoin
4. **去中心化交易所**
5. **金融衍生品**
6. **點對點賭博**
7. **身份和聲譽系統**

### 智能合約範例

```
庫房合約：
- A 每天最多提取 X 個貨幣單位
- B 每天最多提取 Y 個貨幣單位  
- A 和 B 一起可以提取任何金額
- A 可以關閉 B 的提取能力
```

---

## 📜 腳本系統

### 比特幣腳本的限制

- **非圖靈完備**：缺乏循環結構
- **價值盲目性**：無法精確控制提取金額
- **區塊鏈盲目性**：無法訪問區塊鏈數據
- **狀態缺失**：無法創建多階段合約

### 以太坊的解決方案

提供圖靈完備的程式語言來克服這些限制。

---

## 🚀 以太坊

### 核心概念

#### 帳戶系統

兩種帳戶類型：
1. **外部擁有帳戶**：由私鑰控制
2. **合約帳戶**：由合約代碼控制

每個帳戶包含：
- **nonce**：交易計數器
- **餘額**：以太幣餘額
- **storageRoot**：存儲樹根
- **codeHash**：合約代碼哈希

#### 消息和交易

**交易包含**：
- 接收者
- 發送者簽名
- 轉移的以太幣數量
- 數據字段
- STARTGAS 和 GASPRICE 值

#### 狀態轉換函數

```
1. 檢查交易格式和簽名
2. 計算交易費用
3. 初始化 GAS = STARTGAS，扣除字節費用
4. 執行代碼
5. 退還剩餘 GAS
```

### 代碼執行

以太坊虛擬機（EVM）特性：
- **堆疊式架構**
- **256位元字長**
- **三種存儲類型**：堆疊、記憶體、存儲

### 區塊鏈和挖礦

採用修改版的 GHOST 協議：
- 更快的區塊確認時間
- 降低中心化風險
- 提高網路吞吐量

---

## 🎯 應用場景

### 1. 代幣系統

**標準代幣合約功能**：
```solidity
- 發行代幣
- 轉移代幣  
- 查詢餘額
- 批准轉移
```

### 2. 金融衍生品

**差價合約範例**：
- 自動價格獲取
- 保證金管理
- 自動清算

### 3. 身份和聲譽系統

**Web of Trust 模型**：
- 去中心化身份驗證
- 聲譽積分系統
- 社交網路整合

### 4. 去中心化檔案存儲

**激勵機制**：
- 存儲證明
- 檢索獎勵
- 冗餘保證

### 5. 去中心化自治組織（DAO）

**治理機制**：
```
- 提案系統
- 投票機制
- 資金管理
- 自動執行
```

### 6. 其他應用

- **預測市場**
- **去中心化市場**
- **點對點賭博**
- **鏈上治理**

---

## ⚖️ 技術考量與問題

### 1. 修改版 GHOST 實現

**優勢**：
- 減少區塊確認時間
- 降低挖礦中心化
- 提高安全性

### 2. 費用機制

**GAS 系統**：
- 防止無限循環
- 計算資源定價
- 網路濫用保護

### 3. 計算和圖靈完備性

**停機問題**：
- GAS 限制解決
- 經濟激勵對齊
- 網路安全保障

### 4. 貨幣和發行

**以太幣發行模型**：
- 初始預售：60,102,216 ETH
- 礦工獎勵：每年最多 18,000,000 ETH
- 通脹率逐年下降

### 5. 挖礦中心化

**解決策略**：
- 記憶體困難算法
- ASIC 抗性
- 去中心化礦池

### 6. 可擴展性

**挑戰**：
- 每筆交易需要全網處理
- 區塊鏈大小增長
- 中心化風險

**解決方案**：
- 狀態樹根驗證
- 輕量節點支持
- 分片技術（未來）

---

## 🏗️ 去中心化應用程式

### 完整 DApp 架構

1. **低層業務邏輯**：智能合約
2. **中間層協議**：P2P 消息、存儲等
3. **高層用戶界面**：Web 前端

### 以太坊客戶端設計

- **Web 瀏覽器功能**
- **"eth" JavaScript API**
- **區塊鏈互動支持**
- **靜態內容服務**

---

## 🎉 結論

### 以太坊的願景

以太坊不僅僅是加密貨幣的升級版本，而是：

1. **通用平台**：支援任意狀態轉換函數
2. **開放設計**：不限於特定應用領域
3. **基礎層協議**：為金融和非金融協議提供基礎
4. **創新催化劑**：促進去中心化應用生態發展

### 潛在影響

- **提高計算產業效率**
- **增強點對點協議**
- **添加經濟激勵層**
- **創造新的應用可能性**

### 未來展望

以太坊協議為構建大量金融和非金融協議提供了獨特的平台，我們相信它非常適合作為未來多年中眾多協議的基礎層。

---

## 📚 參考資料

### 核心概念
1. [內在價值](https://tinyurl.com/BitcoinMag-IntrinsicValue)
2. [智能財產](https://en.bitcoin.it/wiki/Smart_Property)
3. [智能合約](https://en.bitcoin.it/wiki/Contracts)
4. [B-money](http://www.weidai.com/bmoney.txt)
5. [比特幣白皮書](http://bitcoin.org/bitcoin.pdf)

### 技術實現
6. [Namecoin](https://namecoin.org/)
7. [有色幣白皮書](https://tinyurl.com/coloredcoin-whitepaper)
8. [Mastercoin 白皮書](https://github.com/mastercoin-MSC/spec)
9. [GHOST 協議](http://www.cs.huji.ac.il/~avivz/pubs/13/btc_scalability_full.pdf)
10. [以太坊 RLP](https://github.com/ethereum/wiki/wiki/%5BEnglish%5D-RLP)

---

## 🏷️ 標籤

`區塊鏈` `智能合約` `去中心化` `以太坊` `加密貨幣` `DApp` `DAO` `Web3`

---

**注意**：本 README 基於 2014 年的以太坊白皮書。實際的以太坊實現可能與原始提案有所不同，特別是在共識機制（從工作量證明轉向權益證明）和擴展解決方案方面。

---

*最後更新：2024年*
