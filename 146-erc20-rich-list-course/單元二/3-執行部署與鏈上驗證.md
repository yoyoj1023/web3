# ç¬¬ä¸‰èª²ï¼šåŸ·è¡Œéƒ¨ç½²èˆ‡éˆä¸Šé©—è­‰

### ğŸ¯ å­¸ç¿’ç›®æ¨™

åœ¨é€™ä¸€èª²ä¸­ï¼Œæˆ‘å€‘å°‡ï¼š
- åŸ·è¡Œå¯¦éš›çš„åˆç´„éƒ¨ç½²åˆ° Optimism Sepolia
- åœ¨å€å¡Šéˆç€è¦½å™¨ä¸Šé©—è­‰åˆç´„
- æ¸¬è©¦åˆç´„åŠŸèƒ½ä¸¦ç”Ÿæˆæ¸¬è©¦æ•¸æ“š
- å­¸ç¿’éƒ¨ç½²å¾Œçš„æœ€ä½³å¯¦è¸

### ğŸš€ åŸ·è¡Œéƒ¨ç½²æµç¨‹

#### æ­¥é©Ÿ 1ï¼šéƒ¨ç½²å‰æœ€çµ‚æª¢æŸ¥

åœ¨é–‹å§‹éƒ¨ç½²ä¹‹å‰ï¼Œè®“æˆ‘å€‘åšæœ€å¾Œçš„æª¢æŸ¥ï¼š

```bash
cd packages/hardhat

# 1. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
echo "æª¢æŸ¥ç’°å¢ƒè®Šæ•¸..."
if [ -z "$DEPLOYER_PRIVATE_KEY" ]; then
  echo "âŒ DEPLOYER_PRIVATE_KEY æœªè¨­å®š"
  exit 1
fi

if [ -z "$ALCHEMY_API_KEY" ]; then
  echo "âŒ ALCHEMY_API_KEY æœªè¨­å®š"
  exit 1
fi

echo "âœ… ç’°å¢ƒè®Šæ•¸æª¢æŸ¥å®Œæˆ"

# 2. æª¢æŸ¥éŒ¢åŒ…é¤˜é¡
npx hardhat run scripts/check-balance.ts --network optimismSepolia
```

å»ºç«‹æª¢æŸ¥é¤˜é¡è…³æœ¬ `scripts/check-balance.ts`ï¼š

```typescript
import { ethers } from "hardhat";

async function checkBalance() {
  const [deployer] = await ethers.getSigners();
  const balance = await ethers.provider.getBalance(deployer.address);
  const network = await ethers.provider.getNetwork();
  
  console.log("ğŸ’° éŒ¢åŒ…é¤˜é¡æª¢æŸ¥:");
  console.log(`   åœ°å€: ${deployer.address}`);
  console.log(`   ç¶²è·¯: ${network.name} (${network.chainId})`);
  console.log(`   é¤˜é¡: ${ethers.formatEther(balance)} ETH`);
  
  const minimumBalance = ethers.parseEther("0.01");
  if (balance < minimumBalance) {
    console.log("âŒ é¤˜é¡ä¸è¶³ï¼Œéœ€è¦è‡³å°‘ 0.01 ETH é€²è¡Œéƒ¨ç½²");
    console.log("ğŸ”— ç²å–æ¸¬è©¦ ETH: https://faucet.quicknode.com/optimism/sepolia");
    process.exit(1);
  }
  
  console.log("âœ… é¤˜é¡å……è¶³ï¼Œå¯ä»¥é€²è¡Œéƒ¨ç½²");
}

checkBalance()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
```

#### æ­¥é©Ÿ 2ï¼šåŸ·è¡Œéƒ¨ç½²

```bash
# æ¸…ç†ä¹‹å‰çš„éƒ¨ç½²ï¼ˆå¦‚æœæœ‰ï¼‰
rm -rf deployments/optimismSepolia/

# ç·¨è­¯åˆç´„
yarn compile

# åŸ·è¡Œæ¸¬è©¦
yarn test

# éƒ¨ç½²åˆ° Optimism Sepolia
yarn deploy --network optimismSepolia
```

**é æœŸè¼¸å‡ºï¼š**
```
==================================================
ğŸš€ é–‹å§‹éƒ¨ç½² RichListToken åˆç´„
==================================================
ğŸ“Š éƒ¨ç½²åƒæ•¸:
   ç¶²è·¯: optimismSepolia
   éƒ¨ç½²è€…: 0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8
   ä»£å¹£æ“æœ‰è€…: 0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8
   ä»£å¹£åç¨±: RichList Demo Token
   ä»£å¹£ç¬¦è™Ÿ: RDT
   åˆå§‹ä¾›æ‡‰é‡: 1000000 tokens

âœ… éƒ¨ç½²è€…é¤˜é¡æª¢æŸ¥é€šé: 0.05 ETH
ğŸ“¦ æ­£åœ¨éƒ¨ç½² RichListToken åˆç´„...
deploying "RichListToken" (tx: 0x1234567890abcdef...)
waiting for 5 block confirmations...
âœ… åˆç´„éƒ¨ç½²æˆåŠŸ!
   åˆç´„åœ°å€: 0xAbC123456789dEf...
   éƒ¨ç½²äº¤æ˜“: 0x1234567890abcdef...
   Gas ä½¿ç”¨é‡: 2,345,678

ğŸ” é©—è­‰éƒ¨ç½²çµæœ...
   ä»£å¹£åç¨±: RichList Demo Token
   ä»£å¹£ç¬¦è™Ÿ: RDT
   å°æ•¸é»ä½æ•¸: 18
   ç¸½ä¾›æ‡‰é‡: 1000000.0 tokens
   æœ€å¤§ä¾›æ‡‰é‡: 100000000.0 tokens
   åˆç´„æ“æœ‰è€…: 0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8
   æ“æœ‰è€…é¤˜é¡: 1000000.0 tokens

==================================================
ğŸ‰ RichListToken éƒ¨ç½²å®Œæˆ!
==================================================
ğŸ”— åœ¨å€å¡Šéˆç€è¦½å™¨ä¸­æŸ¥çœ‹: https://sepolia-optimism.etherscan.io/address/0xAbC123456789dEf...
```

#### æ­¥é©Ÿ 3ï¼šé©—è­‰éƒ¨ç½²æˆåŠŸ

```bash
# åŸ·è¡Œéƒ¨ç½²é©—è­‰è…³æœ¬
npx hardhat run scripts/verify-deployment.ts --network optimismSepolia
```

### ğŸ” å€å¡Šéˆç€è¦½å™¨é©—è­‰

#### æ­¥é©Ÿ 1ï¼šè‡ªå‹•åˆç´„é©—è­‰

```bash
# ä½¿ç”¨ Hardhat è‡ªå‹•é©—è­‰åˆç´„
npx hardhat verify --network optimismSepolia <CONTRACT_ADDRESS> "RichList Demo Token" "RDT" "1000000" "<OWNER_ADDRESS>"

# ä¾‹å¦‚:
npx hardhat verify --network optimismSepolia 0xAbC123456789dEf... "RichList Demo Token" "RDT" "1000000" "0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8"
```

#### æ­¥é©Ÿ 2ï¼šæ‰‹å‹•é©—è­‰ï¼ˆå¦‚æœè‡ªå‹•é©—è­‰å¤±æ•—ï¼‰

1. **å‰å¾€ Optimism Sepolia Etherscan**
   - æ‰“é–‹ https://sepolia-optimism.etherscan.io
   - æœç´¢ä½ çš„åˆç´„åœ°å€

2. **é»æ“Š "Contract" æ¨™ç±¤**
   - é¸æ“‡ "Verify and Publish"

3. **å¡«å¯«é©—è­‰è³‡è¨Š**
   ```
   Compiler Type: Solidity (Single file)
   Compiler Version: v0.8.19+commit.7dd6d404
   Open Source License Type: MIT
   ```

4. **è²¼ä¸Šåˆç´„åŸå§‹ç¢¼**
   - è¤‡è£½å®Œæ•´çš„ `RichListToken.sol` å…§å®¹
   - åŒ…å«æ‰€æœ‰ import çš„åˆç´„

5. **å¡«å¯«å»ºæ§‹å­åƒæ•¸**
   ```
   RichList Demo Token
   RDT
   1000000
   0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8
   ```

#### æ­¥é©Ÿ 3ï¼šé©—è­‰æˆåŠŸç¢ºèª

é©—è­‰æˆåŠŸå¾Œï¼Œä½ æ‡‰è©²èƒ½çœ‹åˆ°ï¼š
- âœ… ç¶ è‰²çš„å‹¾é¸æ¨™è¨˜
- ğŸ“‹ å®Œæ•´çš„åˆç´„åŸå§‹ç¢¼
- ğŸ” å¯è®€çš„åˆç´„å‡½æ•¸ä»‹é¢
- ğŸ“Š åˆç´„äº‹ä»¶æ—¥èªŒ

### ğŸ§ª æ¸¬è©¦åˆç´„åŠŸèƒ½

#### æ­¥é©Ÿ 1ï¼šåŸºæœ¬åŠŸèƒ½æ¸¬è©¦

å»ºç«‹æ¸¬è©¦è…³æœ¬ `scripts/test-contract-functions.ts`ï¼š

```typescript
import { ethers } from "hardhat";
import { RichListToken } from "../typechain-types";

async function testContractFunctions() {
  console.log("ğŸ§ª é–‹å§‹æ¸¬è©¦åˆç´„åŠŸèƒ½...");
  
  // ç²å–åˆç´„å¯¦ä¾‹
  const deployment = await ethers.deployments.get("RichListToken");
  const richListToken = await ethers.getContractAt("RichListToken", deployment.address) as RichListToken;
  const [deployer] = await ethers.getSigners();
  
  console.log(`ğŸ“‹ åˆç´„åœ°å€: ${deployment.address}`);
  console.log(`ğŸ‘¤ æ¸¬è©¦è€…: ${deployer.address}`);
  
  try {
    // æ¸¬è©¦ 1: è®€å–åŸºæœ¬è³‡è¨Š
    console.log("\nğŸ“Š æ¸¬è©¦ 1: è®€å–åŸºæœ¬è³‡è¨Š");
    const [name, symbol, decimals, totalSupply, maxSupply] = await richListToken.getTokenInfo();
    console.log(`   âœ… åç¨±: ${name}`);
    console.log(`   âœ… ç¬¦è™Ÿ: ${symbol}`);
    console.log(`   âœ… å°æ•¸ä½: ${decimals}`);
    console.log(`   âœ… ç¸½ä¾›æ‡‰: ${ethers.formatEther(totalSupply)}`);
    console.log(`   âœ… æœ€å¤§ä¾›æ‡‰: ${ethers.formatEther(maxSupply)}`);
    
    // æ¸¬è©¦ 2: æª¢æŸ¥æ“æœ‰è€…é¤˜é¡
    console.log("\nğŸ’° æ¸¬è©¦ 2: æª¢æŸ¥é¤˜é¡");
    const ownerBalance = await richListToken.balanceOf(deployer.address);
    console.log(`   âœ… æ“æœ‰è€…é¤˜é¡: ${ethers.formatEther(ownerBalance)} tokens`);
    
    // æ¸¬è©¦ 3: æ¸¬è©¦é‘„é€ åŠŸèƒ½
    console.log("\nğŸ­ æ¸¬è©¦ 3: é‘„é€ åŠŸèƒ½");
    const mintAmount = ethers.parseEther("1000");
    const testAddress = "0x1234567890123456789012345678901234567890";
    
    console.log(`   é‘„é€  ${ethers.formatEther(mintAmount)} tokens åˆ° ${testAddress}...`);
    const mintTx = await richListToken.mint(testAddress, mintAmount);
    await mintTx.wait();
    
    const testBalance = await richListToken.balanceOf(testAddress);
    console.log(`   âœ… é‘„é€ æˆåŠŸï¼Œé¤˜é¡: ${ethers.formatEther(testBalance)} tokens`);
    
    // æ¸¬è©¦ 4: æ¸¬è©¦è½‰å¸³åŠŸèƒ½
    console.log("\nğŸ’¸ æ¸¬è©¦ 4: è½‰å¸³åŠŸèƒ½");
    const transferAmount = ethers.parseEther("500");
    const recipient = "0x9876543210987654321098765432109876543210";
    
    console.log(`   è½‰å¸³ ${ethers.formatEther(transferAmount)} tokens åˆ° ${recipient}...`);
    const transferTx = await richListToken.transfer(recipient, transferAmount);
    await transferTx.wait();
    
    const recipientBalance = await richListToken.balanceOf(recipient);
    console.log(`   âœ… è½‰å¸³æˆåŠŸï¼Œæ¥æ”¶è€…é¤˜é¡: ${ethers.formatEther(recipientBalance)} tokens`);
    
    // æ¸¬è©¦ 5: æ¸¬è©¦æ‰¹é‡è½‰å¸³
    console.log("\nğŸ“¦ æ¸¬è©¦ 5: æ‰¹é‡è½‰å¸³");
    const recipients = [
      "0x1111111111111111111111111111111111111111",
      "0x2222222222222222222222222222222222222222",
      "0x3333333333333333333333333333333333333333"
    ];
    const amounts = [
      ethers.parseEther("100"),
      ethers.parseEther("200"),
      ethers.parseEther("300")
    ];
    
    console.log(`   æ‰¹é‡è½‰å¸³åˆ° ${recipients.length} å€‹åœ°å€...`);
    const batchTx = await richListToken.batchTransfer(recipients, amounts);
    await batchTx.wait();
    
    for (let i = 0; i < recipients.length; i++) {
      const balance = await richListToken.balanceOf(recipients[i]);
      console.log(`   âœ… ${recipients[i]}: ${ethers.formatEther(balance)} tokens`);
    }
    
    console.log("\nğŸ‰ æ‰€æœ‰åŠŸèƒ½æ¸¬è©¦é€šé!");
    
  } catch (error) {
    console.error("âŒ æ¸¬è©¦å¤±æ•—:", error);
  }
}

testContractFunctions()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
```

åŸ·è¡Œæ¸¬è©¦ï¼š

```bash
npx hardhat run scripts/test-contract-functions.ts --network optimismSepolia
```

#### æ­¥é©Ÿ 2ï¼šç”Ÿæˆå¯Œè±ªæ¦œæ¸¬è©¦æ•¸æ“š

```bash
# ç”Ÿæˆæ¸¬è©¦æ•¸æ“š
npx hardhat run scripts/generate-test-data.ts --network optimismSepolia
```

**é æœŸè¼¸å‡ºï¼š**
```
ğŸ² é–‹å§‹ç”Ÿæˆæ¸¬è©¦æ•¸æ“š...
ğŸ“ ä½¿ç”¨å¸³æˆ¶: 0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8
ğŸ’° éƒ¨ç½²è€…ä»£å¹£é¤˜é¡: 999400.0 tokens
ğŸ“Š æº–å‚™åˆ†ç™¼ä»£å¹£çµ¦ 30 å€‹åœ°å€
ğŸ’¸ ç¸½åˆ†ç™¼é‡‘é¡: 181000 tokens
ğŸ“¦ è™•ç†ç¬¬ 1 æ‰¹ (10 å€‹åœ°å€)...
   äº¤æ˜“å“ˆå¸Œ: 0xabcd1234...
   âœ… æ‰¹æ¬¡å®Œæˆ
ğŸ“¦ è™•ç†ç¬¬ 2 æ‰¹ (10 å€‹åœ°å€)...
   äº¤æ˜“å“ˆå¸Œ: 0xefgh5678...
   âœ… æ‰¹æ¬¡å®Œæˆ
ğŸ“¦ è™•ç†ç¬¬ 3 æ‰¹ (10 å€‹åœ°å€)...
   äº¤æ˜“å“ˆå¸Œ: 0xijkl9012...
   âœ… æ‰¹æ¬¡å®Œæˆ
ğŸ‰ æ¸¬è©¦æ•¸æ“šç”Ÿæˆå®Œæˆ!

ğŸ“ˆ å¯Œè±ªæ¦œé è¦½ (å‰ 10 å):
   1. 0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8: 50000.0 tokens
   2. 0x8ba1f109551bD432803012645Hac136c22C8C7c: 30000.0 tokens
   3. 0xaB7C8803962c0f2F5BBBe3FA8bf41cd82d1b2B: 25000.0 tokens
   4. 0x4B20993Bc481177ec7E8f571ceCaE8A9e22C02db: 20000.0 tokens
   5. 0x78731D3Ca6b7E34aC0F824c42a7cC18A495cabaB: 15000.0 tokens
   ...
```

### ğŸ“Š é©—è­‰éƒ¨ç½²è³‡è¨Š

#### æ­¥é©Ÿ 1ï¼šæª¢æŸ¥éƒ¨ç½²æª”æ¡ˆ

```bash
# æŸ¥çœ‹éƒ¨ç½²è³‡è¨Š
cat deployments/optimismSepolia/RichListToken.json | jq '.address'
cat deployments/optimismSepolia/RichListToken.json | jq '.transactionHash'
cat deployments/optimismSepolia/RichListToken.json | jq '.receipt.gasUsed'
```

#### æ­¥é©Ÿ 2ï¼šæ›´æ–°å‰ç«¯é…ç½®

éƒ¨ç½²æˆåŠŸå¾Œï¼Œéœ€è¦æ›´æ–°å‰ç«¯çš„åˆç´„é…ç½®ï¼š

```bash
# è¤‡è£½éƒ¨ç½²è³‡è¨Šåˆ°å‰ç«¯
cp deployments/optimismSepolia/RichListToken.json ../nextjs/contracts/deployedContracts.ts
```

æˆ–æ‰‹å‹•æ›´æ–° `packages/nextjs/contracts/deployedContracts.ts`ï¼š

```typescript
const deployedContracts = {
  11155420: { // Optimism Sepolia Chain ID
    RichListToken: {
      address: "0xYourContractAddress",
      abi: [
        // ... ABI from deployment
      ],
    },
  },
} as const;

export default deployedContracts;
```

### ğŸ”— é‡è¦é€£çµæ•´ç†

éƒ¨ç½²å®Œæˆå¾Œï¼Œæ•´ç†é‡è¦é€£çµï¼š

#### å€å¡Šéˆç€è¦½å™¨
- **åˆç´„åœ°å€**: https://sepolia-optimism.etherscan.io/address/[CONTRACT_ADDRESS]
- **éƒ¨ç½²äº¤æ˜“**: https://sepolia-optimism.etherscan.io/tx/[DEPLOY_TX_HASH]
- **ä»£å¹£é é¢**: https://sepolia-optimism.etherscan.io/token/[CONTRACT_ADDRESS]

#### é–‹ç™¼å·¥å…·
- **Alchemy Dashboard**: https://dashboard.alchemy.com/
- **Optimism Sepolia Faucet**: https://faucet.quicknode.com/optimism/sepolia
- **Optimism Bridge**: https://app.optimism.io/bridge

### ğŸ“‹ éƒ¨ç½²å¾Œæª¢æŸ¥æ¸…å–®

ç¢ºèªä»¥ä¸‹é …ç›®éƒ½å·²å®Œæˆï¼š

- [ ] **åˆç´„éƒ¨ç½²æˆåŠŸ**
  - éƒ¨ç½²äº¤æ˜“å·²ç¢ºèª
  - åˆç´„åœ°å€å¯è¨ªå•
  - Gas è²»ç”¨åˆç†

- [ ] **åˆç´„é©—è­‰å®Œæˆ**
  - åŸå§‹ç¢¼å·²é©—è­‰
  - å»ºæ§‹å­åƒæ•¸æ­£ç¢º
  - å‡½æ•¸ä»‹é¢å¯è®€

- [ ] **åŠŸèƒ½æ¸¬è©¦é€šé**
  - åŸºæœ¬ ERC20 åŠŸèƒ½æ­£å¸¸
  - é‘„é€ åŠŸèƒ½æ­£å¸¸
  - æ‰¹é‡æ“ä½œæ­£å¸¸

- [ ] **æ¸¬è©¦æ•¸æ“šç”Ÿæˆ**
  - å¯Œè±ªæ¦œæ•¸æ“šå·²å»ºç«‹
  - å¤šå€‹æŒæœ‰è€…åœ°å€
  - é¤˜é¡åˆ†å¸ƒåˆç†

- [ ] **å‰ç«¯é…ç½®æ›´æ–°**
  - åˆç´„åœ°å€å·²æ›´æ–°
  - ABI å·²åŒæ­¥
  - ç¶²è·¯é…ç½®æ­£ç¢º

### ğŸ› å¸¸è¦‹å•é¡Œæ’é™¤

#### å•é¡Œ 1ï¼šé©—è­‰å¤±æ•—

```
Error: Unable to verify contract
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. æª¢æŸ¥ç·¨è­¯å™¨ç‰ˆæœ¬æ˜¯å¦åŒ¹é…
2. ç¢ºèªå»ºæ§‹å­åƒæ•¸æ ¼å¼æ­£ç¢º
3. ä½¿ç”¨ flattened åˆç´„ä»£ç¢¼
4. ç­‰å¾…å¹¾åˆ†é˜å¾Œé‡è©¦

#### å•é¡Œ 2ï¼šGas ä¼°ç®—éŒ¯èª¤

```
Error: cannot estimate gas
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. æª¢æŸ¥å‡½æ•¸åƒæ•¸æ˜¯å¦æ­£ç¢º
2. ç¢ºèªéŒ¢åŒ…æœ‰è¶³å¤ é¤˜é¡
3. å¢åŠ  gas limit
4. æª¢æŸ¥åˆç´„é‚è¼¯éŒ¯èª¤

#### å•é¡Œ 3ï¼šäº¤æ˜“å¤±æ•—

```
Error: transaction reverted
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. æŸ¥çœ‹ revert åŸå› 
2. æª¢æŸ¥æ¬Šé™è¨­å®š
3. é©—è­‰è¼¸å…¥åƒæ•¸
4. æ¸¬è©¦ç¶²è·¯é€£æ¥

### ğŸ‰ æ­å–œï¼

ä½ å·²ç¶“æˆåŠŸå®Œæˆäº† ERC20 ä»£å¹£çš„å®Œæ•´éƒ¨ç½²æµç¨‹ï¼ç¾åœ¨ä½ æ“æœ‰ï¼š

âœ… **å·²éƒ¨ç½²çš„ ERC20 ä»£å¹£**
- åœ¨ Optimism Sepolia ä¸Šé‹è¡Œ
- ç¶“éå€å¡Šéˆç€è¦½å™¨é©—è­‰
- å…·å‚™å®Œæ•´åŠŸèƒ½

âœ… **è±å¯Œçš„æ¸¬è©¦æ•¸æ“š**
- å¤šå€‹ä»£å¹£æŒæœ‰è€…
- ä¸åŒé¤˜é¡åˆ†å¸ƒ
- å¯Œè±ªæ¦œæ’è¡Œæ•¸æ“š

âœ… **å®Œæ•´çš„éƒ¨ç½²æ–‡æª”**
- éƒ¨ç½²äº¤æ˜“è¨˜éŒ„
- åˆç´„åœ°å€å’Œ ABI
- æ¸¬è©¦çµæœé©—è­‰

åœ¨ä¸‹å€‹å–®å…ƒä¸­ï¼Œæˆ‘å€‘å°‡é–‹å§‹å»ºç«‹å‰ç«¯æ‡‰ç”¨ï¼Œè®“ç”¨æˆ¶èƒ½å¤ æŸ¥è©¢å’Œå±•ç¤ºé€™äº›å¯Œè±ªæ¦œæ•¸æ“šï¼

---

**æº–å‚™å¥½å»ºç«‹ç¾è§€çš„å‰ç«¯ç•Œé¢äº†å—ï¼Ÿ** ğŸ¨
