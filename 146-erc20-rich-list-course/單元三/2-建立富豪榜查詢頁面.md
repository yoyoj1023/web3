# ç¬¬äºŒèª²ï¼šå»ºç«‹å¯Œè±ªæ¦œæŸ¥è©¢é é¢

### ğŸ¯ å­¸ç¿’ç›®æ¨™

åœ¨é€™ä¸€èª²ä¸­ï¼Œæˆ‘å€‘å°‡ï¼š
- å»ºç«‹å¯Œè±ªæ¦œæŸ¥è©¢é é¢çš„å®Œæ•´çµæ§‹
- å¯¦ä½œç”¨æˆ¶è¼¸å…¥ç•Œé¢å’Œç‹€æ…‹ç®¡ç†
- æ•´åˆ Alchemy API é€²è¡Œæ•¸æ“šç²å–
- å»ºç«‹ç¾è§€çš„æ•¸æ“šå±•ç¤ºç•Œé¢
- å¯¦ç¾éŒ¯èª¤è™•ç†å’Œè¼‰å…¥ç‹€æ…‹

### ğŸ—ï¸ é é¢æ¶æ§‹è¨­è¨ˆ

#### 1. å»ºç«‹é é¢è·¯ç”±

é¦–å…ˆï¼Œåœ¨ Next.js ä¸­å»ºç«‹æ–°çš„é é¢è·¯ç”±ï¼š

```bash
# é€²å…¥å‰ç«¯ç›®éŒ„
cd packages/nextjs

# å»ºç«‹å¯Œè±ªæ¦œé é¢
mkdir -p app/rich-list
touch app/rich-list/page.tsx
```

#### 2. é é¢çµæ§‹è¦åŠƒ

```
Rich List Page
â”œâ”€â”€ Header Section          # æ¨™é¡Œå’Œèªªæ˜
â”œâ”€â”€ Search Form            # ä»£å¹£åœ°å€è¼¸å…¥è¡¨å–®
â”‚   â”œâ”€â”€ Token Address Input
â”‚   â”œâ”€â”€ Page Size Selector
â”‚   â””â”€â”€ Search Button
â”œâ”€â”€ Token Info Display     # ä»£å¹£åŸºæœ¬è³‡è¨Š
â”œâ”€â”€ Rich List Table        # å¯Œè±ªæ¦œæ•¸æ“šè¡¨æ ¼
â”‚   â”œâ”€â”€ Rank Column
â”‚   â”œâ”€â”€ Address Column
â”‚   â”œâ”€â”€ Balance Column
â”‚   â””â”€â”€ Percentage Column
â”œâ”€â”€ Pagination Controls    # åˆ†é æ§åˆ¶
â””â”€â”€ Loading & Error States # è¼‰å…¥å’ŒéŒ¯èª¤ç‹€æ…‹
```

### ğŸ“ å¯¦ä½œé é¢çµ„ä»¶

#### 1. ä¸»é é¢çµ„ä»¶

å»ºç«‹ `app/rich-list/page.tsx`ï¼š

```tsx
"use client";

import { useState } from "react";
import { NextPage } from "next";
import { AddressInput, IntegerInput } from "~~/components/scaffold-alchemy";
import { TokenInfoCard } from "./_components/TokenInfoCard";
import { RichListTable } from "./_components/RichListTable";
import { PaginationControls } from "./_components/PaginationControls";
import { LoadingSpinner } from "./_components/LoadingSpinner";
import { ErrorMessage } from "./_components/ErrorMessage";
import { useTokenHolders } from "~~/hooks/useTokenHolders";
import { isAddress } from "viem";

const RichListPage: NextPage = () => {
  // ç‹€æ…‹ç®¡ç†
  const [tokenAddress, setTokenAddress] = useState<string>("");
  const [pageSize, setPageSize] = useState<bigint>(BigInt(10));
  const [currentPage, setCurrentPage] = useState<number>(1);
  
  // è‡ªå®šç¾© Hook ç”¨æ–¼æ•¸æ“šç²å–
  const {
    data: tokenData,
    holders,
    totalHolders,
    isLoading,
    error,
    fetchTokenHolders,
  } = useTokenHolders();

  // è™•ç†æœå°‹
  const handleSearch = async () => {
    if (!isAddress(tokenAddress)) {
      alert("è«‹è¼¸å…¥æœ‰æ•ˆçš„ä»¥å¤ªåŠåœ°å€");
      return;
    }
    
    setCurrentPage(1);
    await fetchTokenHolders(tokenAddress, Number(pageSize));
  };

  // è™•ç†åˆ†é 
  const handlePageChange = (page: number) => {
    setCurrentPage(page);
  };

  // è¨ˆç®—åˆ†é æ•¸æ“š
  const totalPages = Math.ceil(totalHolders / Number(pageSize));
  const startIndex = (currentPage - 1) * Number(pageSize);
  const endIndex = startIndex + Number(pageSize);
  const currentHolders = holders.slice(startIndex, endIndex);

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
      <div className="container mx-auto px-4 py-8 max-w-6xl">
        
        {/* é é¢æ¨™é¡Œ */}
        <div className="text-center mb-12">
          <h1 className="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
            ğŸ† ERC20 å¯Œè±ªæ¦œæŸ¥è©¢
          </h1>
          <p className="text-lg text-gray-600 max-w-2xl mx-auto">
            è¼¸å…¥ä»»ä½• ERC20 ä»£å¹£åˆç´„åœ°å€ï¼Œå³æ™‚æŸ¥çœ‹ä»£å¹£æŒæœ‰è€…æ’è¡Œæ¦œã€‚
            æ”¯æ´æ‰€æœ‰ Optimism Sepolia ç¶²è·¯ä¸Šçš„ä»£å¹£ã€‚
          </p>
        </div>

        {/* æœå°‹è¡¨å–® */}
        <div className="bg-white rounded-2xl shadow-xl p-8 mb-8">
          <h2 className="text-2xl font-semibold text-gray-800 mb-6">
            ğŸ” ä»£å¹£æŸ¥è©¢
          </h2>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {/* ä»£å¹£åœ°å€è¼¸å…¥ */}
            <div className="md:col-span-2">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                ä»£å¹£åˆç´„åœ°å€
              </label>
              <AddressInput
                value={tokenAddress}
                onChange={setTokenAddress}
                placeholder="0x1234567890abcdef..."
                className="w-full"
                disabled={isLoading}
              />
              <p className="text-xs text-gray-500 mt-1">
                è«‹è¼¸å…¥æœ‰æ•ˆçš„ ERC20 ä»£å¹£åˆç´„åœ°å€
              </p>
            </div>

            {/* æ¯é é¡¯ç¤ºæ•¸é‡ */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                æ¯é é¡¯ç¤º
              </label>
              <IntegerInput
                value={pageSize}
                onChange={setPageSize}
                placeholder="10"
                className="w-full"
                disabled={isLoading}
              />
              <p className="text-xs text-gray-500 mt-1">
                5-50 å€‹é …ç›®
              </p>
            </div>
          </div>

          {/* æœå°‹æŒ‰éˆ• */}
          <div className="mt-6">
            <button
              onClick={handleSearch}
              disabled={!tokenAddress || isLoading}
              className="
                w-full md:w-auto
                bg-gradient-to-r from-blue-600 to-purple-600
                hover:from-blue-700 hover:to-purple-700
                disabled:from-gray-400 disabled:to-gray-500
                disabled:cursor-not-allowed
                text-white font-semibold
                py-3 px-8 rounded-xl
                transition-all duration-300
                transform hover:scale-105 disabled:hover:scale-100
                shadow-lg hover:shadow-xl
              "
            >
              {isLoading ? (
                <div className="flex items-center justify-center gap-2">
                  <div className="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
                  æŸ¥è©¢ä¸­...
                </div>
              ) : (
                "ğŸš€ æŸ¥è©¢å¯Œè±ªæ¦œ"
              )}
            </button>
          </div>
        </div>

        {/* éŒ¯èª¤è¨Šæ¯ */}
        {error && (
          <ErrorMessage 
            message={error}
            onRetry={() => handleSearch()}
            className="mb-8"
          />
        )}

        {/* ä»£å¹£è³‡è¨Šå¡ç‰‡ */}
        {tokenData && !error && (
          <TokenInfoCard 
            tokenData={tokenData}
            className="mb-8"
          />
        )}

        {/* è¼‰å…¥ç‹€æ…‹ */}
        {isLoading && (
          <LoadingSpinner 
            message="æ­£åœ¨ç²å–å¯Œè±ªæ¦œæ•¸æ“š..."
            className="mb-8"
          />
        )}

        {/* å¯Œè±ªæ¦œè¡¨æ ¼ */}
        {holders.length > 0 && !isLoading && !error && (
          <>
            <RichListTable
              holders={currentHolders}
              tokenSymbol={tokenData?.symbol || "TOKEN"}
              totalSupply={tokenData?.totalSupply}
              startRank={startIndex + 1}
              className="mb-8"
            />

            {/* åˆ†é æ§åˆ¶ */}
            {totalPages > 1 && (
              <PaginationControls
                currentPage={currentPage}
                totalPages={totalPages}
                totalItems={totalHolders}
                itemsPerPage={Number(pageSize)}
                onPageChange={handlePageChange}
              />
            )}
          </>
        )}

        {/* ç©ºç‹€æ…‹ */}
        {holders.length === 0 && !isLoading && !error && tokenAddress && (
          <div className="text-center py-16">
            <div className="text-6xl mb-4">ğŸ”</div>
            <h3 className="text-xl font-semibold text-gray-700 mb-2">
              æœªæ‰¾åˆ°æŒæœ‰è€…æ•¸æ“š
            </h3>
            <p className="text-gray-500">
              è«‹ç¢ºèªä»£å¹£åœ°å€æ­£ç¢ºï¼Œæˆ–è©²ä»£å¹£å¯èƒ½æ²’æœ‰æŒæœ‰è€…ã€‚
            </p>
          </div>
        )}

        {/* åˆå§‹ç‹€æ…‹ */}
        {!tokenAddress && !isLoading && (
          <div className="text-center py-16">
            <div className="text-6xl mb-4">ğŸ¯</div>
            <h3 className="text-xl font-semibold text-gray-700 mb-2">
              é–‹å§‹æŸ¥è©¢å¯Œè±ªæ¦œ
            </h3>
            <p className="text-gray-500">
              è¼¸å…¥ ERC20 ä»£å¹£åˆç´„åœ°å€ï¼ŒæŸ¥çœ‹æŒæœ‰è€…æ’è¡Œæ¦œã€‚
            </p>
          </div>
        )}
      </div>
    </div>
  );
};

export default RichListPage;
```

#### 2. ä»£å¹£è³‡è¨Šå¡ç‰‡çµ„ä»¶

å»ºç«‹ `app/rich-list/_components/TokenInfoCard.tsx`ï¼š

```tsx
import { formatUnits } from "viem";

interface TokenData {
  name: string;
  symbol: string;
  decimals: number;
  totalSupply: string;
  contractAddress: string;
}

interface TokenInfoCardProps {
  tokenData: TokenData;
  className?: string;
}

export function TokenInfoCard({ tokenData, className = "" }: TokenInfoCardProps) {
  const formattedSupply = formatUnits(
    BigInt(tokenData.totalSupply), 
    tokenData.decimals
  );

  return (
    <div className={`bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl shadow-xl p-8 text-white ${className}`}>
      <div className="flex items-center justify-between mb-6">
        <div>
          <h2 className="text-3xl font-bold mb-2">
            {tokenData.name}
          </h2>
          <div className="bg-white/20 backdrop-blur-sm rounded-full px-4 py-1 inline-block">
            <span className="text-sm font-medium">{tokenData.symbol}</span>
          </div>
        </div>
        <div className="text-right">
          <div className="text-sm opacity-80">ç¸½ä¾›æ‡‰é‡</div>
          <div className="text-2xl font-bold">
            {Number(formattedSupply).toLocaleString()}
          </div>
          <div className="text-sm opacity-80">tokens</div>
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
        <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4">
          <div className="opacity-80 mb-1">åˆç´„åœ°å€</div>
          <div className="font-mono break-all">
            {tokenData.contractAddress.slice(0, 10)}...{tokenData.contractAddress.slice(-8)}
          </div>
        </div>
        
        <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4">
          <div className="opacity-80 mb-1">å°æ•¸ä½æ•¸</div>
          <div className="font-semibold">{tokenData.decimals}</div>
        </div>
        
        <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4">
          <div className="opacity-80 mb-1">ç¶²è·¯</div>
          <div className="font-semibold">Optimism Sepolia</div>
        </div>
      </div>
    </div>
  );
}
```

#### 3. å¯Œè±ªæ¦œè¡¨æ ¼çµ„ä»¶

å»ºç«‹ `app/rich-list/_components/RichListTable.tsx`ï¼š

```tsx
import { Address } from "~~/components/scaffold-alchemy";
import { formatUnits } from "viem";

interface TokenHolder {
  address: string;
  balance: string;
}

interface RichListTableProps {
  holders: TokenHolder[];
  tokenSymbol: string;
  totalSupply?: string;
  startRank: number;
  className?: string;
}

export function RichListTable({ 
  holders, 
  tokenSymbol, 
  totalSupply, 
  startRank,
  className = "" 
}: RichListTableProps) {
  
  const calculatePercentage = (balance: string): number => {
    if (!totalSupply) return 0;
    const balanceNum = Number(formatUnits(BigInt(balance), 18));
    const totalSupplyNum = Number(formatUnits(BigInt(totalSupply), 18));
    return (balanceNum / totalSupplyNum) * 100;
  };

  const formatBalance = (balance: string): string => {
    const formatted = formatUnits(BigInt(balance), 18);
    return Number(formatted).toLocaleString(undefined, {
      maximumFractionDigits: 2,
      minimumFractionDigits: 0,
    });
  };

  return (
    <div className={`bg-white rounded-2xl shadow-xl overflow-hidden ${className}`}>
      <div className="px-8 py-6 bg-gradient-to-r from-gray-50 to-gray-100 border-b">
        <h2 className="text-2xl font-bold text-gray-800">
          ğŸ† å¯Œè±ªæ¦œæ’è¡Œ
        </h2>
        <p className="text-gray-600 mt-1">
          å…±æ‰¾åˆ° {holders.length} å€‹æŒæœ‰è€…
        </p>
      </div>

      <div className="overflow-x-auto">
        <table className="w-full">
          <thead className="bg-gray-50">
            <tr>
              <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                æ’å
              </th>
              <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                æŒæœ‰è€…åœ°å€
              </th>
              <th className="px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                æŒæœ‰æ•¸é‡
              </th>
              <th className="px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                ä½”æ¯”
              </th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200">
            {holders.map((holder, index) => {
              const rank = startRank + index;
              const percentage = calculatePercentage(holder.balance);
              
              return (
                <tr 
                  key={holder.address}
                  className="hover:bg-gray-50 transition-colors duration-200"
                >
                  {/* æ’å */}
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      <div className={`
                        w-8 h-8 rounded-full flex items-center justify-center
                        text-sm font-bold text-white
                        ${rank === 1 ? 'bg-yellow-500' : 
                          rank === 2 ? 'bg-gray-400' :
                          rank === 3 ? 'bg-amber-600' :
                          'bg-blue-500'}
                      `}>
                        {rank <= 3 ? 
                          (rank === 1 ? 'ğŸ¥‡' : rank === 2 ? 'ğŸ¥ˆ' : 'ğŸ¥‰') :
                          rank
                        }
                      </div>
                    </div>
                  </td>

                  {/* åœ°å€ */}
                  <td className="px-6 py-4 whitespace-nowrap">
                    <Address 
                      address={holder.address}
                      format="short"
                      size="base"
                      blockExplorerAddressLink={true}
                    />
                  </td>

                  {/* æŒæœ‰æ•¸é‡ */}
                  <td className="px-6 py-4 whitespace-nowrap text-right">
                    <div className="text-sm font-semibold text-gray-900">
                      {formatBalance(holder.balance)} {tokenSymbol}
                    </div>
                  </td>

                  {/* ä½”æ¯” */}
                  <td className="px-6 py-4 whitespace-nowrap text-right">
                    <div className="text-sm text-gray-600">
                      {percentage.toFixed(2)}%
                    </div>
                    {/* è¦–è¦ºåŒ–ä½”æ¯”æ¢ */}
                    <div className="w-20 bg-gray-200 rounded-full h-2 ml-auto mt-1">
                      <div 
                        className="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-500"
                        style={{ width: `${Math.min(percentage * 2, 100)}%` }}
                      ></div>
                    </div>
                  </td>
                </tr>
              );
            })}
          </tbody>
        </table>
      </div>
    </div>
  );
}
```

#### 4. åˆ†é æ§åˆ¶çµ„ä»¶

å»ºç«‹ `app/rich-list/_components/PaginationControls.tsx`ï¼š

```tsx
interface PaginationControlsProps {
  currentPage: number;
  totalPages: number;
  totalItems: number;
  itemsPerPage: number;
  onPageChange: (page: number) => void;
  className?: string;
}

export function PaginationControls({
  currentPage,
  totalPages,
  totalItems,
  itemsPerPage,
  onPageChange,
  className = "",
}: PaginationControlsProps) {
  const startItem = (currentPage - 1) * itemsPerPage + 1;
  const endItem = Math.min(currentPage * itemsPerPage, totalItems);

  const getVisiblePages = () => {
    const delta = 2;
    const range = [];
    const rangeWithDots = [];

    for (
      let i = Math.max(2, currentPage - delta);
      i <= Math.min(totalPages - 1, currentPage + delta);
      i++
    ) {
      range.push(i);
    }

    if (currentPage - delta > 2) {
      rangeWithDots.push(1, "...");
    } else {
      rangeWithDots.push(1);
    }

    rangeWithDots.push(...range);

    if (currentPage + delta < totalPages - 1) {
      rangeWithDots.push("...", totalPages);
    } else {
      rangeWithDots.push(totalPages);
    }

    return rangeWithDots;
  };

  return (
    <div className={`bg-white rounded-xl shadow-lg p-6 ${className}`}>
      <div className="flex flex-col sm:flex-row justify-between items-center gap-4">
        {/* è³‡è¨Šé¡¯ç¤º */}
        <div className="text-sm text-gray-600">
          é¡¯ç¤ºç¬¬ <span className="font-semibold">{startItem}</span> è‡³{" "}
          <span className="font-semibold">{endItem}</span> é …ï¼Œ
          å…± <span className="font-semibold">{totalItems}</span> é …
        </div>

        {/* åˆ†é æŒ‰éˆ• */}
        <div className="flex items-center gap-1">
          {/* ä¸Šä¸€é  */}
          <button
            onClick={() => onPageChange(currentPage - 1)}
            disabled={currentPage === 1}
            className="
              px-3 py-2 text-sm font-medium
              text-gray-500 hover:text-gray-700
              bg-white hover:bg-gray-50
              border border-gray-300 rounded-l-lg
              disabled:opacity-50 disabled:cursor-not-allowed
              transition-colors duration-200
            "
          >
            ä¸Šä¸€é 
          </button>

          {/* é ç¢¼æŒ‰éˆ• */}
          {getVisiblePages().map((page, index) => (
            <button
              key={index}
              onClick={() => typeof page === "number" && onPageChange(page)}
              disabled={page === "..." || page === currentPage}
              className={`
                px-3 py-2 text-sm font-medium
                border-t border-b border-r border-gray-300
                transition-colors duration-200
                ${
                  page === currentPage
                    ? "bg-blue-600 text-white border-blue-600 z-10"
                    : page === "..."
                    ? "text-gray-400 cursor-default"
                    : "text-gray-700 hover:text-blue-600 bg-white hover:bg-gray-50"
                }
              `}
            >
              {page}
            </button>
          ))}

          {/* ä¸‹ä¸€é  */}
          <button
            onClick={() => onPageChange(currentPage + 1)}
            disabled={currentPage === totalPages}
            className="
              px-3 py-2 text-sm font-medium
              text-gray-500 hover:text-gray-700
              bg-white hover:bg-gray-50
              border border-gray-300 rounded-r-lg
              disabled:opacity-50 disabled:cursor-not-allowed
              transition-colors duration-200
            "
          >
            ä¸‹ä¸€é 
          </button>
        </div>
      </div>
    </div>
  );
}
```

#### 5. è¼‰å…¥å’ŒéŒ¯èª¤ç‹€æ…‹çµ„ä»¶

å»ºç«‹ `app/rich-list/_components/LoadingSpinner.tsx`ï¼š

```tsx
interface LoadingSpinnerProps {
  message?: string;
  className?: string;
}

export function LoadingSpinner({ 
  message = "è¼‰å…¥ä¸­...", 
  className = "" 
}: LoadingSpinnerProps) {
  return (
    <div className={`bg-white rounded-2xl shadow-xl p-12 text-center ${className}`}>
      <div className="flex flex-col items-center gap-4">
        <div className="relative">
          <div className="w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"></div>
          <div className="w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin absolute top-2 left-2 animate-pulse"></div>
        </div>
        <div>
          <h3 className="text-lg font-semibold text-gray-700 mb-2">
            {message}
          </h3>
          <p className="text-gray-500 text-sm">
            æ­£åœ¨å¾å€å¡Šéˆç²å–æœ€æ–°æ•¸æ“š...
          </p>
        </div>
      </div>
    </div>
  );
}
```

å»ºç«‹ `app/rich-list/_components/ErrorMessage.tsx`ï¼š

```tsx
interface ErrorMessageProps {
  message: string;
  onRetry?: () => void;
  className?: string;
}

export function ErrorMessage({ 
  message, 
  onRetry, 
  className = "" 
}: ErrorMessageProps) {
  return (
    <div className={`bg-red-50 border border-red-200 rounded-2xl p-8 ${className}`}>
      <div className="flex flex-col items-center text-center gap-4">
        <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center">
          <span className="text-2xl">âš ï¸</span>
        </div>
        <div>
          <h3 className="text-lg font-semibold text-red-800 mb-2">
            æŸ¥è©¢å¤±æ•—
          </h3>
          <p className="text-red-600 mb-4">
            {message}
          </p>
          {onRetry && (
            <button
              onClick={onRetry}
              className="
                bg-red-600 hover:bg-red-700
                text-white font-medium
                py-2 px-6 rounded-lg
                transition-colors duration-200
              "
            >
              é‡è©¦
            </button>
          )}
        </div>
      </div>
    </div>
  );
}
```

### ğŸ”— è‡ªå®šç¾© Hook å¯¦ä½œ

å»ºç«‹ `hooks/useTokenHolders.ts`ï¼š

```typescript
import { useState, useCallback } from "react";

interface TokenData {
  name: string;
  symbol: string;
  decimals: number;
  totalSupply: string;
  contractAddress: string;
}

interface TokenHolder {
  address: string;
  balance: string;
}

interface UseTokenHoldersReturn {
  data: TokenData | null;
  holders: TokenHolder[];
  totalHolders: number;
  isLoading: boolean;
  error: string | null;
  fetchTokenHolders: (address: string, pageSize: number) => Promise<void>;
}

export function useTokenHolders(): UseTokenHoldersReturn {
  const [data, setData] = useState<TokenData | null>(null);
  const [holders, setHolders] = useState<TokenHolder[]>([]);
  const [totalHolders, setTotalHolders] = useState(0);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const fetchTokenHolders = useCallback(async (address: string, pageSize: number) => {
    setIsLoading(true);
    setError(null);

    try {
      // é€™è£¡å°‡åœ¨ä¸‹å€‹å–®å…ƒå¯¦ä½œ Alchemy API æ•´åˆ
      const response = await fetch('/api/token-holders', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          contractAddress: address,
          pageSize,
        }),
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const result = await response.json();

      setData(result.tokenData);
      setHolders(result.holders);
      setTotalHolders(result.totalHolders);
    } catch (err) {
      console.error('Error fetching token holders:', err);
      setError(
        err instanceof Error 
          ? err.message 
          : 'ç²å–ä»£å¹£æŒæœ‰è€…æ•¸æ“šæ™‚ç™¼ç”ŸéŒ¯èª¤'
      );
    } finally {
      setIsLoading(false);
    }
  }, []);

  return {
    data,
    holders,
    totalHolders,
    isLoading,
    error,
    fetchTokenHolders,
  };
}
```

### ğŸ¨ æ¨£å¼å„ªåŒ–

#### 1. å…¨åŸŸæ¨£å¼æ›´æ–°

åœ¨ `styles/globals.css` ä¸­æ·»åŠ è‡ªå®šç¾©æ¨£å¼ï¼š

```css
/* å¯Œè±ªæ¦œé é¢ç‰¹å®šæ¨£å¼ */
.rich-list-gradient {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.rich-list-card {
  @apply bg-white/90 backdrop-blur-sm border border-white/20 shadow-xl;
}

.rich-list-table-row {
  @apply hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all duration-300;
}

/* å‹•ç•«æ•ˆæœ */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
}

/* éŸ¿æ‡‰å¼å­—é«”å¤§å° */
.responsive-text {
  @apply text-sm sm:text-base lg:text-lg;
}

/* è‡ªå®šç¾©æ»¾å‹•æ¢ */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: #cbd5e0 #f7fafc;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: #f7fafc;
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #cbd5e0;
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #a0aec0;
}
```

#### 2. éŸ¿æ‡‰å¼ä½ˆå±€å„ªåŒ–

```tsx
// åœ¨ä¸»é é¢çµ„ä»¶ä¸­æ·»åŠ éŸ¿æ‡‰å¼é¡åˆ¥
<div className="
  container mx-auto 
  px-4 sm:px-6 lg:px-8 
  py-8 lg:py-12 
  max-w-7xl
">
  {/* æ¨™é¡Œå€åŸŸ */}
  <div className="text-center mb-8 lg:mb-12">
    <h1 className="
      text-3xl sm:text-4xl lg:text-5xl xl:text-6xl 
      font-bold text-gray-900 mb-4
    ">
      ğŸ† ERC20 å¯Œè±ªæ¦œæŸ¥è©¢
    </h1>
    <p className="
      text-base sm:text-lg lg:text-xl 
      text-gray-600 
      max-w-2xl lg:max-w-3xl 
      mx-auto
    ">
      è¼¸å…¥ä»»ä½• ERC20 ä»£å¹£åˆç´„åœ°å€ï¼Œå³æ™‚æŸ¥çœ‹ä»£å¹£æŒæœ‰è€…æ’è¡Œæ¦œã€‚
    </p>
  </div>
  
  {/* å…¶ä»–å…§å®¹... */}
</div>
```

### ğŸ§ª æ¸¬è©¦é é¢åŠŸèƒ½

#### 1. å»ºç«‹æ¸¬è©¦æ•¸æ“š

ç‚ºäº†åœ¨é–‹ç™¼éšæ®µæ¸¬è©¦é é¢ï¼Œå¯ä»¥å»ºç«‹æ¨¡æ“¬æ•¸æ“šï¼š

```typescript
// utils/mockData.ts
export const mockTokenData = {
  name: "RichList Demo Token",
  symbol: "RDT",
  decimals: 18,
  totalSupply: "1000000000000000000000000", // 1M tokens
  contractAddress: "0x1234567890123456789012345678901234567890",
};

export const mockHolders = [
  {
    address: "0x742d35Cc6634C0532925a3b8D238C1e8D8F6D9E8",
    balance: "50000000000000000000000", // 50k tokens
  },
  {
    address: "0x8ba1f109551bD432803012645Hac136c22C8C7c",
    balance: "30000000000000000000000", // 30k tokens
  },
  // ... æ›´å¤šæ¸¬è©¦æ•¸æ“š
];
```

#### 2. é–‹ç™¼æ¨¡å¼åˆ‡æ›

```typescript
// åœ¨ useTokenHolders hook ä¸­æ·»åŠ é–‹ç™¼æ¨¡å¼
const isDevelopment = process.env.NODE_ENV === 'development';

const fetchTokenHolders = useCallback(async (address: string, pageSize: number) => {
  setIsLoading(true);
  setError(null);

  try {
    if (isDevelopment) {
      // é–‹ç™¼æ¨¡å¼ä½¿ç”¨æ¨¡æ“¬æ•¸æ“š
      await new Promise(resolve => setTimeout(resolve, 1000)); // æ¨¡æ“¬ç¶²è·¯å»¶é²
      setData(mockTokenData);
      setHolders(mockHolders);
      setTotalHolders(mockHolders.length);
      return;
    }

    // ç”Ÿç”¢æ¨¡å¼ä½¿ç”¨çœŸå¯¦ API
    // ... å¯¦éš› API èª¿ç”¨ä»£ç¢¼
  } catch (err) {
    // ... éŒ¯èª¤è™•ç†
  } finally {
    setIsLoading(false);
  }
}, []);
```

### ğŸ“± ç§»å‹•ç«¯å„ªåŒ–

#### 1. éŸ¿æ‡‰å¼è¡¨æ ¼

```tsx
// åœ¨ RichListTable çµ„ä»¶ä¸­æ·»åŠ ç§»å‹•ç«¯å„ªåŒ–
<div className="block sm:hidden">
  {/* ç§»å‹•ç«¯å¡ç‰‡ä½ˆå±€ */}
  {holders.map((holder, index) => (
    <div key={holder.address} className="bg-gray-50 rounded-lg p-4 mb-4">
      <div className="flex justify-between items-start mb-2">
        <div className="flex items-center gap-2">
          <div className="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold">
            {startRank + index}
          </div>
          <Address address={holder.address} format="short" size="sm" />
        </div>
      </div>
      <div className="text-right">
        <div className="font-semibold text-gray-900">
          {formatBalance(holder.balance)} {tokenSymbol}
        </div>
        <div className="text-sm text-gray-500">
          {calculatePercentage(holder.balance).toFixed(2)}%
        </div>
      </div>
    </div>
  ))}
</div>

<div className="hidden sm:block">
  {/* æ¡Œé¢ç«¯è¡¨æ ¼ä½ˆå±€ */}
  <table className="w-full">
    {/* ... åŸæœ‰è¡¨æ ¼ä»£ç¢¼ */}
  </table>
</div>
```

### âœ… å°çµ

åœ¨é€™ä¸€èª²ä¸­ï¼Œæˆ‘å€‘æˆåŠŸå»ºç«‹äº†å®Œæ•´çš„å¯Œè±ªæ¦œæŸ¥è©¢é é¢ï¼š

âœ… **å®Œæ•´çš„é é¢çµæ§‹**
- ç¾è§€çš„ç”¨æˆ¶ç•Œé¢è¨­è¨ˆ
- éŸ¿æ‡‰å¼ä½ˆå±€æ”¯æ´
- æ¨¡çµ„åŒ–çµ„ä»¶æ¶æ§‹

âœ… **åŠŸèƒ½é½Šå…¨çš„å…ƒä»¶**
- ä»£å¹£åœ°å€è¼¸å…¥å’Œé©—è­‰
- å¯Œè±ªæ¦œæ•¸æ“šå±•ç¤ºè¡¨æ ¼
- åˆ†é æ§åˆ¶å’Œå°èˆª

âœ… **å„ªç§€çš„ç”¨æˆ¶é«”é©—**
- è¼‰å…¥ç‹€æ…‹å’ŒéŒ¯èª¤è™•ç†
- å‹•ç•«æ•ˆæœå’Œè¦–è¦ºåé¥‹
- ç§»å‹•ç«¯å„ªåŒ–è¨­è¨ˆ

âœ… **å¯ç¶­è­·çš„ä»£ç¢¼çµæ§‹**
- è‡ªå®šç¾© Hooks é€²è¡Œç‹€æ…‹ç®¡ç†
- TypeScript å‹åˆ¥å®‰å…¨
- æ¨¡çµ„åŒ–çµ„ä»¶è¨­è¨ˆ

åœ¨ä¸‹å€‹å–®å…ƒä¸­ï¼Œæˆ‘å€‘å°‡æ•´åˆ Alchemy API ä¾†ç²å–çœŸå¯¦çš„å€å¡Šéˆæ•¸æ“šï¼Œè®“æˆ‘å€‘çš„å¯Œè±ªæ¦œåŠŸèƒ½çœŸæ­£é‹ä½œèµ·ä¾†ï¼

---

**æº–å‚™å¥½è®“ä½ çš„ DApp é€£æ¥çœŸå¯¦çš„å€å¡Šéˆæ•¸æ“šäº†å—ï¼Ÿ** ğŸŒ
