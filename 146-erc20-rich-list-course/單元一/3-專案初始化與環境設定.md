# ç¬¬ä¸‰èª²ï¼šå°ˆæ¡ˆåˆå§‹åŒ–èˆ‡ç’°å¢ƒè¨­å®š

## ğŸ› ï¸ ç’°å¢ƒæº–å‚™æª¢æŸ¥æ¸…å–®

åœ¨é–‹å§‹ä¹‹å‰ï¼Œè«‹ç¢ºèªä½ çš„é–‹ç™¼ç’°å¢ƒå·²ç¶“æº–å‚™å°±ç·’ï¼š

### å¿…å‚™è»Ÿé«”

- [ ] **Node.js v18+** 
  ```bash
  node --version  # æ‡‰è©²é¡¯ç¤º v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
  ```
  
- [ ] **Yarn v1.22+**
  ```bash
  yarn --version  # æ‡‰è©²é¡¯ç¤º 1.22.0 æˆ–æ›´é«˜ç‰ˆæœ¬
  ```

- [ ] **Git**
  ```bash
  git --version   # ç¢ºèªå·²å®‰è£ Git
  ```

- [ ] **VS Code** (æ¨è–¦) æˆ–å…¶ä»–ä»£ç¢¼ç·¨è¼¯å™¨

### ç€è¦½å™¨éŒ¢åŒ…è¨­å®š

- [ ] **å®‰è£ MetaMask** æˆ–å…¶ä»– Web3 éŒ¢åŒ…
- [ ] **å»ºç«‹æ¸¬è©¦éŒ¢åŒ…** (è«‹å‹¿ä½¿ç”¨ä¸»éŒ¢åŒ…é€²è¡Œé–‹ç™¼æ¸¬è©¦)

### API æœå‹™æº–å‚™

- [ ] **è¨»å†Š Alchemy å¸³æˆ¶**ï¼šå‰å¾€ [alchemy.com](https://alchemy.com) è¨»å†Š
- [ ] **ç²å– API Key**ï¼šå»ºç«‹æ–°çš„ App ä¸¦å–å¾— API Key

## ğŸš€ å°ˆæ¡ˆåˆå§‹åŒ–æ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šä½¿ç”¨ Scaffold-Alchemy å»ºç«‹å°ˆæ¡ˆ

é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# ä½¿ç”¨ create-web3-dapp å»ºç«‹æ–°å°ˆæ¡ˆ
npx create-web3-dapp erc20-rich-list

# é¸æ“‡é¸é …ï¼š
# âœ… Framework: Next.js
# âœ… Backend: Hardhat
# âœ… Chain: Optimism Sepolia
# âœ… Styling: Tailwind CSS
# âœ… Package Manager: Yarn
```

### æ­¥é©Ÿ 2ï¼šé€²å…¥å°ˆæ¡ˆç›®éŒ„

```bash
cd erc20-rich-list
```

### æ­¥é©Ÿ 3ï¼šå®‰è£ä¾è³´å¥—ä»¶

```bash
# å®‰è£æ ¹ç›®éŒ„ä¾è³´
yarn install

# å®‰è£ Hardhat ä¾è³´
cd packages/hardhat
yarn install

# å®‰è£ Next.js ä¾è³´
cd ../nextjs
yarn install

# å›åˆ°æ ¹ç›®éŒ„
cd ../..
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹å°è¦½

è®“æˆ‘å€‘è©³ç´°äº†è§£å°ˆæ¡ˆçš„ç›®éŒ„çµæ§‹ï¼š

```
erc20-rich-list/
â”œâ”€â”€ ğŸ“ packages/
â”‚   â”œâ”€â”€ ğŸ“ hardhat/              # æ™ºèƒ½åˆç´„é–‹ç™¼ç’°å¢ƒ
â”‚   â”‚   â”œâ”€â”€ ğŸ“ contracts/        # æ™ºèƒ½åˆç´„æºç¢¼
â”‚   â”‚   â”‚   â””â”€â”€ Counter.sol      # ç¯„ä¾‹åˆç´„
â”‚   â”‚   â”œâ”€â”€ ğŸ“ deploy/           # éƒ¨ç½²è…³æœ¬
â”‚   â”‚   â”‚   â””â”€â”€ 00_deploy_counter.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ test/             # åˆç´„æ¸¬è©¦
â”‚   â”‚   â”‚   â””â”€â”€ Counter.ts
â”‚   â”‚   â”œâ”€â”€ hardhat.config.ts    # Hardhat é…ç½®
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ nextjs/               # å‰ç«¯æ‡‰ç”¨
â”‚       â”œâ”€â”€ ğŸ“ app/              # Next.js 13+ App Router
â”‚       â”‚   â”œâ”€â”€ layout.tsx       # æ ¹ä½ˆå±€
â”‚       â”‚   â”œâ”€â”€ page.tsx         # é¦–é 
â”‚       â”‚   â””â”€â”€ providers.tsx    # Context Providers
â”‚       â”œâ”€â”€ ğŸ“ components/       # React å…ƒä»¶
â”‚       â”‚   â”œâ”€â”€ ğŸ“ scaffold-alchemy/  # å…§å»ºå…ƒä»¶åº«
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“ Address/       # åœ°å€é¡¯ç¤ºå…ƒä»¶
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“ Input/         # è¼¸å…¥å…ƒä»¶
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“ ConnectButton/ # éŒ¢åŒ…é€£æ¥æŒ‰éˆ•
â”‚       â”‚   â”œâ”€â”€ Header.tsx       # ç¶²ç«™æ¨™é¡Œåˆ—
â”‚       â”‚   â””â”€â”€ Footer.tsx       # ç¶²ç«™é è…³
â”‚       â”œâ”€â”€ ğŸ“ hooks/            # è‡ªå®šç¾© Hooks
â”‚       â”‚   â””â”€â”€ ğŸ“ scaffold-alchemy/ # æ¡†æ¶æä¾›çš„ Hooks
â”‚       â”œâ”€â”€ ğŸ“ services/         # æœå‹™å±¤
â”‚       â”œâ”€â”€ ğŸ“ utils/            # å·¥å…·å‡½æ•¸
â”‚       â”œâ”€â”€ ğŸ“ contracts/        # åˆç´„ ABI å’Œåœ°å€
â”‚       â”œâ”€â”€ scaffold.config.ts   # Scaffold é…ç½®
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ README.md
â””â”€â”€ package.json                 # æ ¹ç›®éŒ„é…ç½®
```

### ğŸ” é‡è¦æª”æ¡ˆèªªæ˜

**`packages/hardhat/hardhat.config.ts`**
```typescript
// Hardhat é…ç½®æª”æ¡ˆï¼Œå®šç¾©ç¶²è·¯ã€ç·¨è­¯å™¨è¨­å®šç­‰
import { HardhatUserConfig } from "hardhat/config";
import "@nomicfoundation/hardhat-toolbox";

const config: HardhatUserConfig = {
  solidity: "0.8.19",
  networks: {
    optimismSepolia: {
      url: "https://sepolia.optimism.io",
      accounts: [process.env.DEPLOYER_PRIVATE_KEY!],
    },
  },
};
```

**`packages/nextjs/scaffold.config.ts`**
```typescript
// Scaffold-Alchemy ä¸»è¦é…ç½®æª”æ¡ˆ
import { Chain } from "viem";
import { optimismSepolia } from "viem/chains";

const scaffoldConfig = {
  targetNetworks: [optimismSepolia] as readonly Chain[],
  pollingInterval: 30000,
  alchemyApiKey: process.env.NEXT_PUBLIC_ALCHEMY_API_KEY,
  walletConnectProjectId: process.env.NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID,
} as const;
```

## âš™ï¸ ç’°å¢ƒè®Šæ•¸è¨­å®š

### æ­¥é©Ÿ 1ï¼šå»ºç«‹ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ

åœ¨ `packages/hardhat/` ç›®éŒ„ä¸‹å»ºç«‹ `.env` æª”æ¡ˆï¼š

```bash
cd packages/hardhat
touch .env
```

### æ­¥é©Ÿ 2ï¼šè¨­å®š Hardhat ç’°å¢ƒè®Šæ•¸

ç·¨è¼¯ `packages/hardhat/.env`ï¼š

```env
# éƒ¨ç½²ç”¨çš„ç§é‘° (æ¸¬è©¦éŒ¢åŒ…ï¼Œä¸è¦ä½¿ç”¨ä¸»éŒ¢åŒ…!)
DEPLOYER_PRIVATE_KEY=your_test_wallet_private_key_here

# Alchemy API Key
ALCHEMY_API_KEY=your_alchemy_api_key_here

# Optimism Sepolia RPC URL
OPTIMISM_SEPOLIA_RPC_URL=https://opt-sepolia.g.alchemy.com/v2/your_api_key_here
```

### æ­¥é©Ÿ 3ï¼šè¨­å®š Next.js ç’°å¢ƒè®Šæ•¸

åœ¨ `packages/nextjs/` ç›®éŒ„ä¸‹å»ºç«‹ `.env.local` æª”æ¡ˆï¼š

```bash
cd ../nextjs
touch .env.local
```

ç·¨è¼¯ `packages/nextjs/.env.local`ï¼š

```env
# Alchemy API Key (å‰ç«¯ä½¿ç”¨)
NEXT_PUBLIC_ALCHEMY_API_KEY=your_alchemy_api_key_here

# WalletConnect Project ID (å¯é¸)
NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID=your_wallet_connect_project_id

# ç¶²è·¯é…ç½®
NEXT_PUBLIC_ENABLE_TESTNETS=true
```

## ğŸŒ è¨­å®š Optimism Sepolia æ¸¬è©¦ç¶²

### æ­¥é©Ÿ 1ï¼šåœ¨ MetaMask ä¸­æ·»åŠ  Optimism Sepolia

æ‰‹å‹•æ·»åŠ ç¶²è·¯ï¼Œæˆ–ä½¿ç”¨ä»¥ä¸‹è³‡è¨Šï¼š

```
ç¶²è·¯åç¨±: Optimism Sepolia
RPC URL: https://sepolia.optimism.io
Chain ID: 11155420
ç¬¦è™Ÿ: ETH
å€å¡Šç€è¦½å™¨: https://sepolia-optimism.etherscan.io
```

### æ­¥é©Ÿ 2ï¼šç²å–æ¸¬è©¦ç”¨ ETH

1. å‰å¾€ [Optimism Sepolia Faucet](https://faucet.quicknode.com/optimism/sepolia)
2. è¼¸å…¥ä½ çš„æ¸¬è©¦éŒ¢åŒ…åœ°å€
3. ç²å–å…è²»çš„æ¸¬è©¦ ETH

### æ­¥é©Ÿ 3ï¼šé©—è­‰ç¶²è·¯é€£æ¥

```bash
# åœ¨ packages/hardhat ç›®éŒ„ä¸‹æ¸¬è©¦ç¶²è·¯é€£æ¥
cd packages/hardhat
npx hardhat run scripts/verify-network.js --network optimismSepolia
```

## ğŸ§ª æ¸¬è©¦å°ˆæ¡ˆè¨­å®š

### æ­¥é©Ÿ 1ï¼šå•Ÿå‹•æœ¬åœ°é–‹ç™¼ç’°å¢ƒ

é–‹å•Ÿä¸‰å€‹çµ‚ç«¯è¦–çª—ï¼š

**çµ‚ç«¯ 1 - Hardhat æœ¬åœ°ç¯€é» (å¯é¸):**
```bash
cd packages/hardhat
yarn chain
```

**çµ‚ç«¯ 2 - éƒ¨ç½²åˆç´„:**
```bash
cd packages/hardhat
yarn deploy --network optimismSepolia
```

**çµ‚ç«¯ 3 - å•Ÿå‹•å‰ç«¯:**
```bash
cd packages/nextjs
yarn dev
```

### æ­¥é©Ÿ 2ï¼šé©—è­‰éƒ¨ç½²æˆåŠŸ

1. é–‹å•Ÿç€è¦½å™¨å‰å¾€ `http://localhost:3000`
2. é€£æ¥ä½ çš„ MetaMask éŒ¢åŒ…
3. ç¢ºèªèƒ½çœ‹åˆ° Scaffold-Alchemy çš„é è¨­ä»‹é¢
4. æ¸¬è©¦éŒ¢åŒ…é€£æ¥åŠŸèƒ½

### æ­¥é©Ÿ 3ï¼šæª¢æŸ¥åˆç´„éƒ¨ç½²

```bash
# æŸ¥çœ‹éƒ¨ç½²çš„åˆç´„åœ°å€
cd packages/hardhat
cat deployments/optimismSepolia/Counter.json
```

## ğŸ› å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ 1ï¼šç§é‘°æ ¼å¼éŒ¯èª¤

**éŒ¯èª¤è¨Šæ¯ï¼š** `Error: private key must be exactly 32 bytes`

**è§£æ±ºæ–¹æ¡ˆï¼š**
```env
# ç¢ºä¿ç§é‘°æ ¼å¼æ­£ç¢ºï¼ŒåŒ…å« 0x å‰ç¶´
DEPLOYER_PRIVATE_KEY=0x1234567890abcdef...
```

### å•é¡Œ 2ï¼šRPC é€£æ¥å¤±æ•—

**éŒ¯èª¤è¨Šæ¯ï¼š** `Error: network does not exist`

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. æª¢æŸ¥ Alchemy API Key æ˜¯å¦æ­£ç¢º
2. ç¢ºèªç¶²è·¯é…ç½®æ˜¯å¦æ­£ç¢º
3. æ¸¬è©¦ç¶²è·¯é€£æ¥ï¼š
```bash
curl -X POST https://opt-sepolia.g.alchemy.com/v2/YOUR_API_KEY \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}'
```

### å•é¡Œ 3ï¼šGas è²»ç”¨ä¸è¶³

**éŒ¯èª¤è¨Šæ¯ï¼š** `Error: insufficient funds for gas`

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. ç¢ºèªæ¸¬è©¦éŒ¢åŒ…æœ‰è¶³å¤ çš„ ETH
2. å¾ faucet ç²å–æ›´å¤šæ¸¬è©¦ ETH
3. é™ä½ gas limit è¨­å®š

### å•é¡Œ 4ï¼šç«¯å£è¢«ä½”ç”¨

**éŒ¯èª¤è¨Šæ¯ï¼š** `Error: listen EADDRINUSE: address already in use :::3000`

**è§£æ±ºæ–¹æ¡ˆï¼š**
```bash
# æŸ¥æ‰¾ä½”ç”¨ç«¯å£çš„ç¨‹åº
lsof -ti:3000

# çµ‚æ­¢ç¨‹åº
kill -9 $(lsof -ti:3000)

# æˆ–ä½¿ç”¨ä¸åŒç«¯å£
yarn dev --port 3001
```

## âœ… è¨­å®šå®Œæˆæª¢æŸ¥æ¸…å–®

å®Œæˆä»¥ä¸‹æª¢æŸ¥é …ç›®ï¼Œç¢ºä¿ç’°å¢ƒè¨­å®šæ­£ç¢ºï¼š

- [ ] Node.js å’Œ Yarn ç‰ˆæœ¬æ­£ç¢º
- [ ] å°ˆæ¡ˆä¾è³´å®‰è£å®Œæˆ
- [ ] ç’°å¢ƒè®Šæ•¸è¨­å®šæ­£ç¢º
- [ ] MetaMask é€£æ¥åˆ° Optimism Sepolia
- [ ] æ¸¬è©¦éŒ¢åŒ…æœ‰è¶³å¤ çš„ ETH
- [ ] åˆç´„éƒ¨ç½²æˆåŠŸ
- [ ] å‰ç«¯æ‡‰ç”¨æ­£å¸¸é‹è¡Œ
- [ ] éŒ¢åŒ…é€£æ¥åŠŸèƒ½æ­£å¸¸

## ğŸ‰ æ­å–œï¼

ä½ å·²ç¶“æˆåŠŸè¨­å®šäº† Scaffold-Alchemy é–‹ç™¼ç’°å¢ƒï¼ç¾åœ¨ä½ æ“æœ‰äº†ï¼š

âœ… **å®Œæ•´çš„é–‹ç™¼ç’°å¢ƒ**ï¼šHardhat + Next.js + TypeScript  
âœ… **æ¸¬è©¦ç¶²è·¯é€£æ¥**ï¼šOptimism Sepolia é…ç½®å®Œæˆ  
âœ… **API æœå‹™æ•´åˆ**ï¼šAlchemy API æº–å‚™å°±ç·’  
âœ… **éŒ¢åŒ…æ•´åˆ**ï¼šMetaMask é€£æ¥æ­£å¸¸  

åœ¨ä¸‹å€‹å–®å…ƒä¸­ï¼Œæˆ‘å€‘å°‡é–‹å§‹ç·¨å¯«å’Œéƒ¨ç½²æˆ‘å€‘çš„ ERC20 ä»£å¹£åˆç´„ã€‚æº–å‚™å¥½é€²å…¥çœŸæ­£çš„é–‹ç™¼éšæ®µäº†å—ï¼Ÿ

---

**ç’°å¢ƒæº–å‚™å®Œæˆï¼Œè®“æˆ‘å€‘é–‹å§‹ç·¨å¯«æ™ºèƒ½åˆç´„å§ï¼** ğŸš€
